{"posts":[{"title":"Oracle 安装","content":"Linux 安装 Oracle软件 环境准备 创建用户和用户组 groupadd oinstall groupadd dba useradd -g oinstall -G dba oracle passwd oracle 安装依赖 yum install gcc make binutils gcc-c++ \\ compat-libstdc++-33elfutils-libelf-devel \\ elfutils-libelf-devel-static ksh libaio \\ libaio-develnumactl-devel sysstat unixODBC \\ unixODBC-devel pcre-devel –y 内核参数调整 关闭selinux /etc/selinux/config # 修改配置文件参数 SELINUX=disabled setenforce 0 修改系统参数（可选） /etc/sysctl.conf fs.aio-max-nr = 1048576 fs.file-max = 6815744 #若安装数据库有ORA-27102报错，可调大kernel.shmall、kernel.shmmax值 kernel.shmall = 4294967296 #shmall 是全部允许使用的共享内存大小 kernel.shmmax = 68719476736 #shmmax 是单个段允许使用的大小，为本机物理内存的一半，单位为byte。 kernel.shmmni = 4096 kernel.sem = 250 32000 100 128 net.ipv4.ip_local_port_range = 9000 65500 net.core.rmem_default = 262144 net.core.rmem_max = 4194304 net.core.wmem_default = 262144 net.core.wmem_max = 1048576 sysctl -p 修改用户限制（可选） /etc/security/limits.conf # 末尾添加 oracle soft nproc 2047 oracle hard nproc 16384 oracle soft nofile 1024 oracle hard nofile 65536 oracle soft stack 10240 /etc/pam.d/login # 末尾添加 session required /lib64/security/pam_limits.so session required pam_limits.so /etc/profile # 末尾添加 if [ $USER = &quot;oracle&quot; ]; then if [ $SHELL = &quot;/bin/ksh&quot; ]; then ulimit -p 16384 ulimit -n 65536 else ulimit -u 16384 -n 65536 fi fi 配置用户环境 创建软件安装路径 # 目录与配置文件相关，请按需修改 mkdir -p /data/oracle/product/11.2.0 mkdir /data/oracle/oradata mkdir /data/oracle/inventory mkdir /data/oracle/fast_recovery_area chown -R oracle:oinstall /data/oracle chmod -R 775 /data/oracle 配置用户环境变量 .bash_profile # 末尾添加 ORACLE_BASE=/data/oracle ORACLE_HOME=$ORACLE_BASE/product/11.2.0 ORACLE_SID=orcl # 实例名与配置文件相关，请按需修改 PATH=$PATH:$ORACLE_HOME/bin export ORACLE_BASE ORACLE_HOME ORACLE_SID PATH source .bash_profile 配置信息 数据库响应文件 db_install.rsp # 静默安装，无需图形界面 oracle.install.option=INSTALL_DB_SWONLY #主机名修改 ORACLE_HOSTNAME=centos36181 UNIX_GROUP_NAME=oinstall INVENTORY_LOCATION=/data/oracle/inventory SELECTED_LANGUAGES=en,zh_CN ORACLE_HOME=/data/oracle/product/11.2.0 ORACLE_BASE=/data/oracle oracle.install.db.InstallEdition=EE oracle.install.db.DBA_GROUP=dba oracle.install.db.OPER_GROUP=dba # 客户端字符串 oracle.install.db.config.starterdb.characterSet=ZHS16GBK DECLINE_SECURITY_UPDATES=true 库实例响应文件 dbca.rsp # 选择创建数据库模式 [CREATEDATABASE] # 全局数据库的名字=SID+主机域名 GDBNAME = &quot;orcl.test&quot; # 对应的实例名字 SID = &quot;orcl&quot; # 建库用的模板文件 TEMPLATENAME = &quot;General_Purpose.dbc&quot; # SYS管理员密码 SYSPASSWORD = &quot;123456&quot; # SYSTEM管理员密码 SYSTEMPASSWORD = &quot;123456&quot; # 数据文件存放目录 DATAFILEDESTINATION =/data/oracle/oradata # 恢复数据存放目录 RECOVERYAREADESTINATION=/data/oracle/fast_recovery_area # 字符集，重要!!! 建库后一般不能更改，所以建库前要确定清楚。 # (CHARACTERSET = &quot;AL32UTF8&quot; NATIONALCHARACTERSET= &quot;UTF8&quot;) CHARACTERSET = &quot;ZHS16GBK&quot; # oracle使用物理内存80%（可选） TOTALMEMORY = &quot;1638&quot; 软件安装与卸载 安装数据库 # 使用oracle用户 ./runInstaller -silent -responseFile /database/response/db_install.rsp -ignorePrereq 以 root 用户的身份执行以下脚本: 1. /data/oracle/inventory/orainstRoot.sh 2. /data/oracle/product/11.2.0/root.sh 配置监听 # 使用oracle用户 netca /silent /responseFile /database/response/netca.rsp 安装库实例 # 使用oracle用户 dbca -silent -responseFile /database/response/dbca.rsp 卸载数据库 dbca -silent -deleteDatabase -responseFile /database/response/dbca.rsp 常见问题处理 ORA-12514: TNS:listener does not currently know of service requested in connect 修改文件/data/oracle/product/11.2.0/network/admin/listener.ora SID_LIST_LISTENER = (SID_LIST = (SID_DESC = (GLOBAL_DBNAME = orcl) (SID_NAME = orcl) ) ) ","link":"https://mzqk.github.io/post/oracle-an-zhuang/"},{"title":"如何阅读一本书","content":"如何阅读一本书 挑出阅读的层次说明 基础阅读层次 准备阅读阶段 认字阶段 读写阶段 基础阅读阶段 检视阅读层次 第一阶段：略读 先看书名页，然后如果有序就先看序。 研究目录页，对这本书的基本架构做概括性的理解。 如果书中附有索引，也要检阅一下。 如果那是本包着书衣的新书，不妨读一下出版者的介绍。 从你对一本书的目录很概略，甚至有点模糊的印象当中，开始挑几个看来跟主题息息相关的篇章来看。 最后一步，把书打开来，东翻翻西翻翻，念个一两段．有时候连续读几页，但不要太多。 第二阶段：粗浅阅读 头一次面对一本难读的书的时候，从头到尾先读完一遍，碰到不懂的地方不要停下来查询或思索。 提升阅读的速度： 将大拇指与食指、中指合并在一起，用这个“指针”顺着一行一行的字移动下去，速度要比你眼睛感觉的还要快一点。强迫自己的眼睛跟着手部的动作移动 。一旦你的眼睛能跟着手移动时，你就能读到那些字句了。 第三阶段：主动的基础阅读 一个阅读者要提出的四个基本问题 整体来说，这本书到底在谈些什么？ 作者细部说了什么，怎么说的？ 这本书说得有道理吗？ 这本书跟你有什么关系？ 第四阶段:做笔记 画底线—在主要的重点，或重要又有力量的句子下画线。 在画底线处的栏外再加画一道线—把你已经画线的部分再强调一遍，或是某一段很重要 ，但要画底线太长了，便在这一整段外加上一个记号。 在空白处做星号或其他符号—要慎用，只用来强调书中十来个最重要的声明或段落即可。你可能想要将做过这样记号的地方每页折一个角，或是夹一张书签，这样你随时从书架上拿起这本书，打开你做记号的地方，就能唤醒你的记忆。 在空白处 编号—作者的某个论点发展出一连串的重要陈述时，可以做顺序编号。 在空白处记下其他的页码—强调作者在书中其他部分也有过同样的论点，或相关 的要点，或是与此处观点不同的地方。这样做能让散布全书的想法统一集中起来。许多读者会用Cf这样的记号，表示比较或参照的意思。 将关键字或句子圈出来—这跟画底线是同样的功能。 在书页的空白处做笔记—在阅读某一章节时，你可能会有些问题（或答案），在空白处记下来，这样可以帮你回 想起你的问题或答案。你也可以将复杂的论点简化说明在书页的空白处。或是记下全书所有主要论点的发展顺序。书中最后一页可以用来作为个人的索引 页，将作者的主要观点依序记下来。 分析阅读层次 第一阶段：找出共通的词义 第一个规则 你一定要知道自己在读的是哪一类书，而且要越早知道越好。 第二个规则 使用一个单一的句子，或最多几句话（一小段文字）来叙述整本书的内容。 第三个规则 将书中重要篇章列举出来，说明它们如何按照顺序组成一个整体的架构。 根据第三个规则，可以有一套运用的公式。这个公式是可以通用的。根据第二个规则，我们可以说出这本书的内容是如此这般。做完这件事之后，我们可 以依照第三个规则，将内容大纲排列如下：(1)作者将全书分成五个部分，第一部分谈的是什么，第二部分谈的是什么，第三部分谈的是别的事，第四部分 则是另外的观点，第五部分又是另一些事。(2)第一个主要的部分又分成三个段落，第一段落为X，第二段落为Y，第三段落为Z。(3)在第一部分的第一阶段 ，作者有四个重点，第一个重点是A，第二个重点是B，第三个重点是C，第四个重点是D等等。 第四个规则 找出作者要问的问题。一本书的作者在开始写作时，都是有一个问题或一连串的问题，而这本书的内容就是一个答案，或许多答 案。 第二阶段：诠释一本书的内容 第一个规则 诠释作者使用的关键字，与作者达成共识。 第二个规则 从最重要的句子中 抓出作者的重要主旨。 第三个规则 从最重要的句子中 抓出作者的重要主旨。 第四个规则 )确定作者已经解决了哪些问题，还有哪些是未解决的 。在未解决的问题中，确定哪些是作者认为自己无法解决的问题。 主题阅读层次 ","link":"https://mzqk.github.io/post/ru-he-yue-du-yi-ben-shu/"},{"title":"时间管理-如何充分利用你的24小时","content":"时间管理-如何充分利用你的24小时 你目前如何利用时间 意识 了解你是如何使用时间的 检查自己的时间花销（时间日志、时间分类统计），意识到哪里的时间用的过多 确定目标建立行动路线图 规划时间，确定目标（短期目标、长期目标） 把你的任务写在工作清单上，把你的目标写在使命描述中。 任务：至最近某个时间你必须完成的一件杂务、差事或工作。 正确选择 在当下的满足与牺牲之间进行选择——你可以规划你的人生。而如果你不做出选择，你就只能任由其他力量主宰你的人生。 使你的时间发挥最大的效用 认识时间是有限的 合理匹配时间和精力 利用空隙时间 有效的时间管理减少时间浪费 迅速决策 快速阅读 提高记忆力 克服拖延 你不是你的思想。相反，你是在更高层次聆听你的思想。因此，你可以控制头脑中那些消极思想。 你可以采取的唯一脏鞥女奥的一个步骤是学会不认同自己的思想。有时你可以心中的某些想法一笑了之，把它们当做少不更事的小孩子荒诞不经的恶作剧。——《当下的力量》 当你把一种思想想象为一个物体时，你就可以控制它。你就可以一把拖延的想法驱逐出你的头脑，就像你将一只行为不端的猫赶出家门一样。——《思考与致富》 化繁为简（物品和思想） 《尽管去做：无压力工作的艺术》——大卫-艾伦 充分计划 每一个小时的计划抵得上五个小时的执行 分批处理 想办法多件事放在一起去完成，而不是单独去完成每一件事，以此来节约你的时间。 充分准备 通过提前进行思考和做好准备，你就可能减少为完成摆在你面前的任何任务所要付出的额努力。 制作任务清单 确定优先次序（四象限） 《高效能人士的七个习惯》——斯蒂芬-柯维 吃青蛙的原则是：如果你必须吃掉两只青蛙，那么，你要先吃较丑的那一只。——《吃掉那只青蛙》 高效率 假装忙碌使你没有时间进行自我反思 二八定律 一些活动会比另一些活动带来更大的回报；因此，要把大部分精力投入到那些真正能够给你带来“最大效益”的项目上去。 专注 不要同时处理多个任务，那是自欺欺人 后记 学会迅速丢弃且不内疚 立刻对事务做出决策 分类储存内容 指定时间回复 戴数显秒针的手表 随时记录心中想法 快速阅读 避免重复造轮子 限定时间完成任务 向前看抛弃过去 ","link":"https://mzqk.github.io/post/shi-jian-guan-li-ru-he-chong-fen-li-yong-ni-de-24-xiao-shi/"},{"title":"Xpath 基础使用","content":"XPath XPath语法 绝对路径 /html/body/tag /: 从根节点开始下选取 相对路径 //tag[@attibute='value']/tag 用法 说明 . 选取当前节点 .. 选取当前节点的父节点 @ 选取属性 [*] 选取节点下标 text() 选取文字 XPath轴 contains关键字 startwith关键字 查找父节点 查找平级节点 XPath运算符 | and or ","link":"https://mzqk.github.io/post/xpath-ji-chu-shi-yong/"},{"title":"搭建 SS 服务器","content":"搭建ss服务器 选择VPS Vultr 本人目前正在使用 Vultr全球最大的游戏主机提供商之一，使用它的原因主要是它是按小时计费的,价格也便宜。目前2.5美元每月的已经售完，5美元的每个月也有1T流量。 BandwagonHos BandwagonHost俗称搬瓦工,性价比很高。这种服务就是只拿来给新手学习Linux，我觉得也是很划得来。 阿里云 阿里云的产品在国内可以说是最好的云主机厂商之一。优点是相比外国的服务肯定要稳定些，但有一点不好就是建的网站无论大小都需要备案。 选择服务器节点 这里需要申明在国外购买的服务分配给的IP有一定可能会被墙掉，特别是我在Vultr上建的几个东京的站点无一能远程上（可能是人品问题）。 网络这方面大家可以自己ping通下，一般延时在200ms左右就能流畅使用。 选择操作系统 这里没什么好说的，建议选择Centos或Debian。这两个操作系统对今后的学习linux是很有好处的。 搭建Shadowsocks 这处便是本文关键 连接服务器 Windows用户建议下载Xshell 、MAC下可直接ssh连接。 下载Shadowsocks #安装python2.7及以上版本， yum install m2crypto python-setuptools easy_install pip pip install shadowsocks 配置 /etc/shadowsocks.json { &quot;server&quot;: &quot;192.0.0.1&quot;, &quot;server_port&quot;:8388, &quot;local_address&quot;: &quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;: &quot;12345678&quot;, &quot;timeout&quot;:300, &quot;method&quot;: &quot;aes-256-cfb&quot; } #也可配置多端口(记住要检查相应端口是否开启) 具体配置 yum install git git clone https://github.com/shadowsocks/shadowsocks.git 运行服务 #检查防火墙信息 firewall-cmd --query-port=443/tcp firewall-cmd --zone=public --add-port=443/tcp --permanent firewall-cmd --reload #开启ss服务 ssserver -c /etc/shadowsocks.json -d start 简易防护 搭建云主机最重要的隐患就是恶意的网络攻击和厂商的抽风，搭建自行搜索保护服务器的方法（如关闭服务器的root远程登录），然后注意的就是利用网站的服务或则其他功能进行备份。 加速 两种加速代码均代理在github上，可在项目中查看详细信息。 锐速 https://github.com/91yun/serverspeeder BBR https://github.com/teddysun/across 下载相应客户端 https://github.com/shadowsocks ","link":"https://mzqk.github.io/post/da-jian-ss-fu-wu-qi/"},{"title":"RHCSA 基本考纲","content":"1.修改root密码 重启进入grub按e编辑 添加rd.break console=stty0 或者修改rw init=/sysroot/bin 进入修复模式 挂载根系统 mount -o remount.rw /sysroot 切换根目录 chroot /sysroot 修改root密码passwd 重建SELinux安全策略 touch /.autorelabel 退出重启 2.修改本机网络信息 修改主机名 /etc/sysconfig/network HOSTNAME信息 /etc/sysconfig/network localhost信息 或 hostnamectl set-hostname example.hostname 修改静态网卡信息 /etc/sysconfig/network-scripts/ifcfg-eth0 BOOTPROTO=static DNS1= IPADDR= NETMASK= GETWAY= 或 nm-connection-editor图形化界面 nmcli connection up &quot;System eth0&quot; 3.搭建默认软件仓库 yum-config-manager --add http://example.com 修改 /etc/yum.repos.d/example.repo 关闭KEY检查gpgcheck=0 yum clean all yum repolist 4.创建账户 创建用户组 groupadd adminuser 创建用户 useradd -G admin1 adminuser 创建用户不赋予shell交互 useradd -s /sbin/nologin admin2 设置用户密码 passwd admin1 5.配置文件权限 6.创建定时任务 开启cron服务 给admin1用户编辑一个任务 crontab -e -u admin1 7.创建共享目录 创建目录 mkdir /home/admin 给予用户组adminuser目录所有权 chown :adminuser /home/admin 赋予组内用户可读、可写和可执行权限，其他用户无权限 chmod 770 /home/admin 8.安装升级内核 下载内核 wget http://kernel.com/download/kernel.rpm 安装rpm包 rpm -ivh kernel.rpm 重启后确认内核版本 uname -r ","link":"https://mzqk.github.io/post/rhcsa-ji-ben-kao-gang/"},{"title":"简单监控windows服务批处理脚本","content":"@echo off rem 定义循环间隔时间和监测的服务： set secs=6000 set srvname=&quot;Redis&quot; echo. echo ======================================== echo == 查询计算机服务的状态， == echo == 每间隔%secs%秒种进行一次查询， == echo == 如发现其停止，则立即启动。 == echo ======================================== echo. echo 此脚本监测的服务是：%srvname% echo. if %srvname%. == . goto end :chkit set svrst=0 for /F &quot;tokens=1* delims= &quot; %%a in ('net start') do if /I &quot;%%a %%b&quot; == %srvname% set svrst=1 if %svrst% == 0 net start %srvname% set svrst= rem 下面的命令用于延时，否则可能会导致cpu单个核心满载。 ping -n %secs% 127.0.0.1 &gt; nul goto chkit :end ","link":"https://mzqk.github.io/post/jian-dan-jian-kong-windows-fu-wu-pi-chu-li-jiao-ben/"},{"title":"linux文件无法删除处理","content":"文件能够通过ls命令查看，但是却不能做修改 文件存在隐藏属性 通过lsattr查看文件属性，再用chattr命令去除特殊属性 通过磁盘inode查找文件 ls -i 查看文件inode节点 通过节点找出文件，并做其它操作 find . -inum 94251 -exec rm -f {} ; ","link":"https://mzqk.github.io/post/linux-wen-jian-wu-fa-shan-chu-chu-li/"},{"title":"execl合并多表宏","content":"Sub 合并当前目录下所有工作簿的全部工作表() Dim MyPath, MyName, AWbName Dim Wb As Workbook, WbN As String Dim G As Long Dim Num As Long Dim BOX As String Application.ScreenUpdating = False MyPath = ActiveWorkbook.Path MyName = Dir(MyPath &amp; &quot;\\&quot; &amp; &quot;*.xls&quot;) AWbName = ActiveWorkbook.Name Num = 0 Do While MyName &lt;&gt; &quot;&quot; If MyName &lt;&gt; AWbName Then Set Wb = Workbooks.Open(MyPath &amp; &quot;\\&quot; &amp; MyName) Num = Num + 1 With Workbooks(1).ActiveSheet .Cells(.Range(&quot;B65536&quot;).End(xlUp).Row + 2, 1) = Left(MyName, Len(MyName) - 4) For G = 1 To Sheets.Count Wb.Sheets(G).UsedRange.Copy .Cells(.Range(&quot;B65536&quot;).End(xlUp).Row + 1, 1) Next WbN = WbN &amp; Chr(13) &amp; Wb.Name Wb.Close False End With End If MyName = Dir Loop Range(&quot;B1&quot;).Select Application.ScreenUpdating = True MsgBox &quot;共合并了&quot; &amp; Num &amp; &quot;个工作薄下的全部工作表。如下：&quot; &amp; Chr(13) &amp; WbN, vbInformation, &quot;提示&quot; End Sub ","link":"https://mzqk.github.io/post/execl-he-bing-duo-biao-hong/"},{"title":"使用修改 hosts 文件方法访问外国网络","content":"hosts下载地址 首先科普下我们为什么不能访问Google、Twitter、Facebook 之类的网站 这是因为我们国家有GFW（英文名称Great Firewall of China）， 也称中国防火墙或中国国家防火墙的存在。为什么要有这个东西的 存在呢？对外的说法是保护国内的网络纯净和谐地发展道路,顺带养 活下国内的BAT ╮(￣⊿￣)╭我想GFW的存在意义是保护的是外国友人不被国内傻逼打扰•̀.̫•́✧ 为了方便用户记忆，我们将IP变成一个个的域名来输入到浏览器进行访问。而这使得访问网站时要先将其域名解析成 IP。DNS的作用就是进行IP解析，把域名对应到IP。 在GFW的五种封锁方法中，有一种简单而效果很好的方法是DNS污染。GFW会对DNS的解析过程进行干扰，这会使对某些被干扰的域名返回一个错误的IP地址给你的主机，使你无法正确连接到你要的服务器上读取正确的信息。Hosts 文件本来是用来提高解析效率。在进行 DNS请求以前，系统会先检查自己的Hosts文件中是否有这个地址映射关系，如果有则调用这个IP地址映射，如果没有再向已知的 DNS 服务器提出域名解析。也就是说 Hosts 的请求级别比 DNS 高。当你的Hosts 文件里面有对应的 IP 时，它就会直接访问那个 IP，而不用通过 DNS。所以，当我们直接将Google、Twitter、Facebook 之类的 IP 放入 Hosts 文件后，就可以跳过 DNS的解析这一步，直接就行IP访问，不受 GFW 的 DNS污染干扰了。 通俗易懂的说修改host后就能访问Google、Twitter、Facebook等被墙网站。 下面就来介绍修改hosts文件的方法 windows 修改文件需要管理员权限 找到文件目录C:\\Windows\\System32\\drivers\\etc\\hosts 把下载好的hosts文件全部内容复制到C:\\WINDOWS\\system32\\drivers\\etc目录中的hosts文件中 保存后在重启浏览器输入https://www.google.com.hk看是否能访问 如果还不可以访问在CMD窗口输入ipconfig /flushdns使其生效。 Linux and Mac Linux与Mac的hosts文件都在相同的目录下 /etc/hosts 同样是用下载好的hosts替代原有的文件 Mac终端输入sudo killall -HUP mDNSResponder使其生效。 Linux终端输入sudo systemctl restart NetworkManager。 注意 : 非systemd发行版，终端输入sudo rcnscd restart，如果不清楚请两个都试一次。 Android 我们知道Android也是Linux系统中的一种，但其修改办法还是有些许不同 需要获取root权限 文件所在路径/system/etc/hosts 补充一下： 就是为什么 Hosts的IP要时不时更改，为什么 FB、Twitter 会仍旧上不去。是因为 GFW 的第二个大招，IP 封锁。比如访问国外一个 IP 无法访问，Ping 不通，tracert 这个 IP 后发现，全部在边缘路由器 (GFW) 附近被拦截。换言之，GFW 直接拦截带有这个 IP 头的数据包。所以，如果你更改的 IP 被封锁了，就算你过了 DNS 这一关，也仍旧不能翻过GFW。而有些站，是直接被屏蔽，无论你怎么添加HOSTS都是不行的。 ","link":"https://mzqk.github.io/post/shi-yong-xiu-gai-hosts-wen-jian-fang-fa-fang-wen-wai-guo-wang-luo/"},{"title":"微信使用 Itchat 实现机器人自动回复功能","content":"itchat itchat是一个开源的微信个人号接口，使用python调用微信从未如此简单。 使用不到三十行的代码，你就可以完成一个能够处理所有信息的微信机器人。 当然，该api的使用远不止一个机器人，更多的功能等着你来发现 该接口与公众号接口itchat 共享类似的操作方式，学习一次掌握两个工具。 如今微信已经成为了个人社交的很大一部分，希望这个项目能够帮助你扩展你的个人的微信号、方便自己的生活。 安装 可以通过本命令安装itchat： pip install itchat 简单入门实例 有了itchat，如果你想要给文件传输助手发一条信息，只需要这样： import itchat itchat.auto_login() itchat.send('Hello, filehelper', toUserName='filehelper') 如果你想要回复发给自己的文本消息，只需要这样： import itchat @itchat.msg_register(itchat.content.TEXT) def text_reply(msg): return msg.text itchat.auto_login() itchat.run() 进阶应用 特殊的字典使用方式 通过打印itchat的用户以及注册消息的参数，可以发现这些值都是字典。 但实际上itchat精心构造了相应的消息、用户、群聊、公众号类。 其所有的键值都可以通过这一方式访问： @itchat.msg_register(TEXT) def _(msg): # equals to print(msg['FromUserName']) print(msg.fromUserName) 属性名为键值首字母小写后的内容。 author = itchat.search_friends(nickName='LittleCoder')[0] author.send('greeting, littlecoder!') 各类型消息的注册 通过如下代码，微信已经可以就日常的各种信息进行获取与回复。 import itchat, time from itchat.content import * @itchat.msg_register([TEXT, MAP, CARD, NOTE, SHARING]) def text_reply(msg): msg.user.send('%s: %s' % (msg.type, msg.text)) @itchat.msg_register([PICTURE, RECORDING, ATTACHMENT, VIDEO]) def download_files(msg): msg.download(msg.fileName) typeSymbol = { PICTURE: 'img', VIDEO: 'vid', }.get(msg.type, 'fil') return '@%s@%s' % (typeSymbol, msg.fileName) @itchat.msg_register(FRIENDS) def add_friend(msg): msg.user.verify() msg.user.send('Nice to meet you!') @itchat.msg_register(TEXT, isGroupChat=True) def text_reply(msg): if msg.isAt: msg.user.send(u'@%s\\u2005I received: %s' % ( msg.actualNickName, msg.text)) itchat.auto_login(True) itchat.run(True) 命令行二维码 通过以下命令可以在登陆的时候使用命令行显示二维码： itchat.auto_login(enableCmdQR=True) 部分系统可能字幅宽度有出入，可以通过将enableCmdQR赋值为特定的倍数进行调整： # 如部分的linux系统，块字符的宽度为一个字符（正常应为两字符），故赋值为2 itchat.auto_login(enableCmdQR=2) 默认控制台背景色为暗色（黑色），若背景色为浅色（白色），可以将enableCmdQR赋值为负值： itchat.auto_login(enableCmdQR=-1) 退出程序后暂存登陆状态 通过如下命令登陆，即使程序关闭，一定时间内重新开启也可以不用重新扫码。 itchat.auto_login(hotReload=True) 用户搜索 使用search_friends方法可以搜索用户，有四种搜索方式： 仅获取自己的用户信息 获取特定UserName的用户信息 获取备注、微信号、昵称中的任何一项等于name键值的用户 获取备注、微信号、昵称分别等于相应键值的用户 其中三、四项可以一同使用，下面是示例程序： # 获取自己的用户信息，返回自己的属性字典 itchat.search_friends() # 获取特定UserName的用户信息 itchat.search_friends(userName='@abcdefg1234567') # 获取任何一项等于name键值的用户 itchat.search_friends(name='littlecodersh') # 获取分别对应相应键值的用户 itchat.search_friends(wechatAccount='littlecodersh') # 三、四项功能可以一同使用 itchat.search_friends(name='LittleCoder机器人', wechatAccount='littlecodersh') 关于公众号、群聊的获取与搜索在文档中有更加详细的介绍。 附件的下载与发送 itchat的附件下载方法存储在msg的Text键中。 发送的文件的文件名（图片给出的默认文件名）都存储在msg的FileName键中。 下载方法接受一个可用的位置参数（包括文件名），并将文件相应的存储。 @itchat.msg_register([PICTURE, RECORDING, ATTACHMENT, VIDEO]) def download_files(msg): msg.download(msg.fileName) itchat.send('@%s@%s' % ( 'img' if msg['Type'] == 'Picture' else 'fil', msg['FileName']), msg['FromUserName']) return '%s received' % msg['Type'] 如果你不需要下载到本地，仅想要读取二进制串进行进一步处理可以不传入参数，方法将会返回图片的二进制串。 @itchat.msg_register([PICTURE, RECORDING, ATTACHMENT, VIDEO]) def download_files(msg): with open(msg.fileName, 'wb') as f: f.write(msg.download()) 用户多开 使用如下命令可以完成多开的操作： import itchat newInstance = itchat.new_instance() newInstance.auto_login(hotReload=True, statusStorageDir='newInstance.pkl') @newInstance.msg_register(itchat.content.TEXT) def reply(msg): return msg.text newInstance.run() 退出及登陆完成后调用特定方法 登陆完成后的方法需要赋值在loginCallback中。 而退出后的方法需要赋值在exitCallback中。 import time import itchat def lc(): print('finish login') def ec(): print('exit') itchat.auto_login(loginCallback=lc, exitCallback=ec) time.sleep(3) itchat.logout() 若不设置loginCallback的值，则将会自动删除二维码图片并清空命令行显示。 常见问题与解答 Q: 为什么中文的文件没有办法上传？ A: 这是由于requests的编码问题导致的。若需要支持中文文件传输，将[fields.py]fields.py-2文件放入requests包的packages/urllib3下即可 Q: 如何通过这个包将自己的微信号变为控制器？ A: 有两种方式：发送、接受自己UserName的消息；发送接收文件传输助手（filehelper）的消息 Q: 为什么我发送信息的时候部分信息没有成功发出来？ A: 有些账号是天生无法给自己的账号发送信息的，建议使用filehelper代替。 ","link":"https://mzqk.github.io/post/wei-xin-shi-yong-itchat-shi-xian-ji-qi-ren-zi-dong-hui-fu-gong-neng/"},{"title":"基础正则表达式","content":"基础正则表达式 符号 说明 * 前一个字符匹配任意次数 . 匹配任意一个字符（除换行符） ^ 匹配行首 $ 匹配行尾 [] 匹配中括号中任意一个字符 [^] 匹配中括号中以外的任意一个字符 |转义字符 {n} 匹配一个字符n次 {n，} 匹配一个字符n次以上 {n，m} 匹配一个字符n至m次 ","link":"https://mzqk.github.io/post/ji-chu-zheng-ze-biao-da-shi/"},{"title":"FHS","content":"/ bin 一般用户使用到的命令，可作为单用户维护模式启用命令 boot 内核加载文件，开机会加载到 cache data dev 设备文件 etc 系统配置文件 home 用户目录 user .bashrc .profile .bash_history .bash_logout .vimrc lib 动态库和模块文件 lib64 支持64位的函数库 media 挂载设备 mnt 临时挂载设备 opt 第三方软件 proc 虚拟文件系统，存放系统核心、行程信息（process）、周边设备等至内存 root 管理员目录 .bashrc .bash_history .profile .viminfo run 开机所产生的各项信息 sbin 系统命令，root所有权限 snap srv 服务进程所需数据文件 sys 虚拟文件系统，记录核心与系统硬件信息较相关的信息 tmp 临时目录 usr 官方软件 var 变量文件 ","link":"https://mzqk.github.io/post/fhs/"},{"title":"Python 基础知识","content":"本文仅为粗略地概括python编程的基本语法，若你有C二级的水平将可以轻易看懂。作为引导很容易了解到python基础，详细的最好能通过官方文档学习。 Python 源程序编码 除去第一行需要添加运行环境#!/usr/local/bin/python2还需要说明编码方式以使程序能够识别中文输出 # -*- coding: utf-8 -*- 数据结构 python的数据类型不需要像C一样特别声明 布尔值 True False 支持and、or和not运算 常量 常量常用全部大写指明，python的优雅在于有规定语法但却没有强制约束，你仍可以对常量做改变 PI = 3.14159265359 列表 list是一种有序的集合，可以随时添加和删除其中的元素。 list = [a,b,c,d] 元组 tuple和list非常类似，但是tuple一旦初始化就不能修改 tupe = ('a','b','c','b') 集合 set和dict类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在set中，没有重复的key。 set = {'a','b','c','d'} 字典 dict全称dictionary，在其他语言中也称为map，使用键-值（key-value）存储，具有极快的查找速度。 dict = {'a':1,'b':2,'c':3,'d':4 } 特性 切片 取一个list或tuple的部分元素是非常常见的操作 L = list(range(100)) [L[0], L[1], L[2]] L[:10] L[-10:] L[10:20] L[:10:2] L[::5] [0,1,2] [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] [90, 91, 92, 93, 94, 95, 96, 97, 98, 99] [10, 11, 12, 13, 14, 15, 16, 17, 18, 19] [0, 2, 4, 6, 8] [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95] 迭代 如果给定一个list或tuple，我们可以通过for循环来遍历这个list或tuple，这种遍历我们称为迭代（Iteration）。 因为dict的存储不是按照list的方式顺序排列，所以，迭代出的结果顺序很可能不一样。默认情况下，dict迭代的是key 列表生成器 列表生成式即ListComprehensions，是Python内置的非常简单却强大的可以用来创建list的生成式。 [x * x for x in range(1, 11)] [x * x for x in range(1, 11) if x % 2 == 0] [m + n for m in 'ABC' for n in 'XYZ'] [1, 4, 9, 16, 25, 36, 49, 64, 81, 100] [4, 16, 36, 64, 100] ['AX', 'AY', 'AZ', 'BX', 'BY', 'BZ', 'CX', 'CY', 'CZ'] 生成器 在Python中，列表在循环的过程中不断推算出后续的元素,这种一边循环一边计算的机制，称为生成器：generator。 g = (x * x for x in range(10)) #通过next()函数可依次调用元素的值 #同样可以使用循环的方式迭代出 迭代器 迭代器是一个可以记住遍历的位置的对象。迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。 控制流程 if if x &lt; 0: print (小于零) elif x == 0: print (等于零) elif x == 1: prin(等于1) else: print(大于零) if判断语句可结合elif用来替换‘case’或‘switch’语句 for 常用遍历 a=['a','b','c','d'] for i in range(len(a)) print (i,a[i]) while value = raw_input('Please input a number:' ) while: if value &lt; 100: print 'Right' else: print 'Please input again' break、continue和else 从C语言引用过来，用在控制语句中跳出或延续 pass 表示什么都不做，可用来构建最小类。（另外也可以用来当作占位符） class myclass: pass 函数 函数嘛，基本编程语言都离不开它。函数能提高应用的模块性，和单一功能功能代码的重复利用率。我们在程序中很多语法本就个内建的函数，比如print()。 内建函数 Python内置了很多有用的函数，我们可以直接调用。 定义函数 def printNum(number): &quot;&quot;&quot; 这是函数 使用print.__doc__可以将其打印出 &quot;&quot;&quot; num = int(number) print(num) 装饰器 递归函数 在函数内部，可以调用其他函数。如果一个函数在内部调用自身本身，这个函数就是递归函数。 通过定义的函数，我们将printNum函数定义为只打整数的print。 闭包 匿名函数 所谓匿名，意即不再使用 def 语句这样标准的形式定义一个函数 f = lambda x,y:x*y print f(4,5) #结果为4*5 装饰器 错误和异常 错误 我们说的错误指的是语法错误，也可以称作解析错误 异常 指的是在语法正常的情况下，表达式引发的错误。程序并不会因为其而崩溃，而是将这种异常的以报错的方式显示出来。既然我们知道了有异常一说（而且很多时候是无法避免的），那我们就该来处理这些异常。 while Ture: try: x = int(input(&quot;Please enter a number&quot;)) break except ValueError: print(&quot;That was no vaild number!Please try again&quot;) 基本语法如上 我们需要输入一个整数，但是如果你要输入的不是整数会怎样？这时候就会提示错误（异常），而且提示如上就是ValueError。这里我们自行定义异常的提示结果。 异常处理 由此我们就可以明白异常产生的一个原因，并且可以自行定义异常产生后处理。 那如果我们不知道程序会出现怎样的错误的该如何？这时就可以直接使用expect来将其异常归纳起来统一处理。在expect下加入else则表示没有异常就执行else后的程序块。 抛出异常 为什么我们要抛出异常呢？ 因为错误是class，捕获一个错误就是捕获到该class的一个实例。因此，错误并不是凭空产生的，而是有意创建并抛出的。Python的内置函数会抛出很多类型的错误，我们自己编写的函数也可以抛出错误。 自定义异常 异常出现我们可以做自定义，通过创建新的异常except Error as e：来命名自己的异常。 异常清理行为 最后来说的是异常的清理行为。假如我们在open了文件后出现异常导致没有close上文件，这样会引发一些不必要的问题。那么我们可以用try...finally来保证finally后的程序块必须执行，当然还有一种方法用with来代替try这是预定义的清理行为。 类 这是一个较麻烦的问题，但对于学过面向对象编程的人来说就较容易理解了。 附录 编码风格 关于缩进符官网介绍的有三种，一个制表符、两个空格或者四个空格。注意这三种风格绝不能混用 当然大多数人建议的尽量使用其中一种风格，并且长期使用它。而我的建议是我们就只把四个空格当作缩进符，因为Tab键存在平台之间的差异，虽然有时使用四个空格很是麻烦（那是因为你没有用到一款好的文本编辑器）。 命名规则 Python命名规则和大多数编程语言一样包含着数字、字母、下划线。（同样的首字符不能为数字） 这里的命名规则并没有强制要求，你也可以灵活使用。 （比如整个项目中并没有使用多少全局变量的时候你就可以将其全部大写） 关于变量 全使用小写字母，碰到多个单词合并成一个变量的时候可以使用_分隔 关于函数 尽量小写，碰到多个单词合并的时候其后接单词使用大写 关于类 首字母大写，多个单词合成时同函数的命名规则 ","link":"https://mzqk.github.io/post/python-ji-chu-zhi-shi/"},{"title":"Oracle 常用操作","content":"Oracle 删除重复数据只留一条 查找表中多余的重复记录，重复记录是根据单个字段（Id）来判断 select * from 表 where Id in (select Id from 表 group byId having count(Id) &gt;1 删除表中多余的重复记录，重复记录是根据单个字段（Id）来判断，只留有rowid最小的记录 DELETE from 表 WHERE (id) IN ( SELECT id FROM 表 GROUP BY id HAVING COUNT(id) &gt; 1) AND ROWID NOT IN (SELECT MIN(ROWID) FROM 表 GROUP BY id HAVING COUNT(*) &gt; 1); 查找表中多余的重复记录（多个字段） select * from 表 a where (a.Id,a.seq) in(select Id,seq from 表 group by Id,seq having count(*) &gt; 1) 删除表中多余的重复记录（多个字段），只留有rowid最小的记录 delete from 表 a where (a.Id,a.seq) in (select Id,seq from 表 group by Id,seq having count(*) &gt; 1) and rowid not in (select min(rowid) from 表 group by Id,seq having count(*)&gt;1) 查找表中多余的重复记录（多个字段），不包含rowid最小的记录 select * from 表 a where (a.Id,a.seq) in (select Id,seq from 表 group by Id,seq having count(*) &gt; 1) and rowid not in (select min(rowid) from 表 group by Id,seq having count(*)&gt;1) 例子 delete --select * from cell where cgi in (select cgi from cell group by cgi having count(cgi) &gt; 1) and time_stamp not in (select min(time_stamp) from cell group by cgi having count(cgi)&gt;1) 查看UNDO空间的快照 select s.username, u.name from v$transaction t,v$rollstat r, v$rollname u,v$session s where s.taddr=t.addr and t.xidusn=r.usn and r.usn=u.usn order by s.username; 查看正在进行的会话 SELECT b.sid oracleID, b.username 登录Oracle用户名, b.serial#, spid 操作系统ID, paddr, sql_text 正在执行的SQL, b.machine 计算机名 FROM v$process a, v$session b, v$sqlarea c WHERE a.addr = b.paddr AND b.sql_hash_value = c.hash_value 锁表和删除会话 select p.spid, a.serial#, c.object_name, b.session_id, b.oracle_username, b.os_user_name from v$process p, v$session a, v$locked_object b, all_objects c where p.addr = a.paddr and a.process = b.process and c.object_id = b.object_id ; select l.session_id,o.owner,o.object_name from v$locked_object l,dba_objects o where l.object_id=o.object_id; select t2.username,t2.sid,t2.serial#,t2.logon_time from v$locked_object t1,v$session t where t1.session_id=t2.sid order by t2.logon_time; alter system kill session '89,22763';session_id,serial# 索引失效 select index_name ,status from user_indexes where Status = 'UNUSABLE' select 'alter index ' || index_name || ' rebuild;' from user_indexes where Status = 'UNUSABLE' select owner, index_name,table_name from dba_indexes where status = 'UNUSABLE' select index_owner,index_Name,partition_name from dba_ind_partitions where status = 'UNUSABLE'; 新建用户 select * from dba_users create user fast_nokia identified by fast_nokia grant select any dictionary to fast_nokia grant connect,select any table to fast_nokia Oracle表空间增加数据文件 查看每个表空间当前数据文件剩余块 select * from dba_data_files where tablespace_name='TPADBS06' select * from dba_temp_files 给表空间增加数据文件 ALTER TABLESPACE USERS ADD DATAFILe '+DGSTATIC/jxwydb/datafile/users21.dbf' SIZE 50M AUTOEXTEND ON NEXT 100M MAXSIZE 31G; ALTER TABLESPACE TPADBS05 ADD DATAFILe '+DGWARE/jxwydb/datafile/tpadbs05_24.dbf' SIZE 50M AUTOEXTEND ON NEXT 100M MAXSIZE 31G; Oracle自动摘除分片维护 分片维护表 select * from tab_partition_drop 作业调度时间（目前是5点运行） select job,what,last_date,next_date,failures,broken from dba_jobs Where schema_user='CAIKE'; select * from user_jobs where what='PROC_DROP_PATITION_SCRIPT; 表空间查询 查看单个表空间使用情况 SELECT TABLESPACE_NAME,SEGMENT_NAME,TO_CHAR(SUM(BYTES)/(1024*1024),'999G999D999') CNT_MB FROM DBA_EXTENTS WHERE OWNER='NIOSDB' AND SEGMENT_TYPE LIKE 'TABLE%' and TABLESPACE_NAME='NIOSDBS' GROUP BY TABLESPACE_NAME,SEGMENT_NAME; *查看所有表空间使用情况 SELECT TABLESPACE_NAME,MAX_M,COUNT_BLOCKS FREE_BLK_CNT,SUM_FREE_M,TO_CHAR(100 * SUM_FREE_M/SUM_M, '99.99')||'%' AS PCT_FREE FROM (SELECT TABLESPACE_NAME,SUM(BYTES)/1024/1024 AS SUM_M FROM DBA_DATA_FILES GROUP BY TABLESPACE_NAME), (SELECT TABLESPACE_NAME AS FS_TS_NAME,MAX(BYTES)/1024/1024 AS MAX_M,COUNT(BLOCKS) AS COUNT_BLOCKS,SUM(BYTES/1024/1024) AS SUM_FREE_M FROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME) WHERE TABLESPACE_NAME = FS_TS_NAME ORDER BY PCT_FREE 恢复表数据修改内容 create table backup_table as select * from source_table as of timestamp sysdate - 1/48 where title like '%测试%'; sysdate - 1/48 半个小时以内操作的 sysdate - 1/24 一个小时内操作的 ","link":"https://mzqk.github.io/post/oracle-chang-yong-cao-zuo/"},{"title":"导出 Oracle 报表","content":" 登入oracle sqlplus niosdb/Niosoptr@jxwydb 导入sql @/home/oracle/zqk/zhibiaocity.sql ql内添加分隔&gt;||','|| sqlplus niosdb/Niosoptr@jxwydb &lt;&lt;EOF @/home/oracle/zqk/zhibiaocity.sql EOF 添加表头 sed '1i\\ name1,name2,name2...' 1.csv&gt;2.csv 整合脚本 #!/bin/ksh cd /home/oracle/zqk/cellflow putfile=&quot;aaa.csv&quot; sqlplus niosdb/Niosoptr@jxwydb &lt;&lt;EOF @/home/oracle/zqk/cellflow/cellflow.sql EOF sed '1i\\ 时间（小时级),ECGI,CELLNAME,上行流量,下行流量' $putfile&gt;tmp.file putfile=&quot;cellflow0515.csv&quot; cp tmp.file $putfile rm tmp.file rm aaa.csv ","link":"https://mzqk.github.io/post/dao-chu-oracle-bao-biao/"},{"title":"AIX 安装 SVN","content":"yum源包地址 packages.lst http://www.oss4aix.org/download/RPMS/subversion/subversion-1.7.3-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/subversion/subversion-devel-1.7.3-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/subversion/mod_dav_svn-1.7.3-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr/apr-1.4.6-1.aix5.2.ppc.rpm http://www.oss4aix.org/download/RPMS/apr/apr-devel-1.4.6-1.aix5.2.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-db4-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-devel-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-freetds-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-gdbm-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-ldap-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-odbc-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/apr-util/apr-util-sqlite-1.4.1-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/expat/expat-2.0.1-3.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/expat/expat-devel-2.0.1-3.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/file/file-libs-5.05-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/gettext/gettext-0.17-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/gettext/gettext-devel-0.17-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/neon/neon-0.29.5-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/neon/neon-devel-0.29.5-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/sqlite/sqlite-3.7.9-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/zlib/zlib-1.2.6-1.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/pkg-config/pkg-config-0.25-2.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/readline/readline-6.2-3.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/db4/db4-4.7.25-2.aix5.1.ppc.rpm http://www.oss4aix.org/download/RPMS/openssl/openssl-0.9.8u-1.aix5.1.ppc.rpm 下载二进制包脚本 auto_wget.sh #!/bin/sh echo &quot;auto download some rpm packages from Internet begin...&quot; if [ ! -f packages.lst ]; then echo &quot;Error: file packages.lst not exist.&quot; exit -1 fi for FILENAME in `cat packages.lst` do echo &quot;download $FILENAME begin...&quot; wget $FILENAME echo &quot;download $FILENAME end...&quot; done echo &quot;done&quot; exit 0 自动安装软件包脚本 auto_install.sh #!/bin/sh echo &quot;auto install some rpm packages from Internet begin...&quot; if [ ! -f packages.lst ]; then echo &quot;Error: file packages.lst not exist.&quot; exit -1 fi for FILENAME in `awk -F&quot;/&quot; '{print $NF}' packages.lst'` do echo &quot;Installing $FILENAME begin...&quot; rpm -ivh $FILENAME --nodeps echo &quot;Installing $FILENAME end...&quot; done echo &quot;done&quot; exit 0 官网介绍所需依赖环境 配置文件 ","link":"https://mzqk.github.io/post/aix-an-zhuang-svn/"},{"title":"Linux 常用 shell 命令","content":" ls -d $(echo ${PATH//😕 }) &gt; /dev/null 显示PATH中失效的目录 ​​​​ awk -F ',' '{ x = x + $4 } END { print x }' test.csv 从CSV中计算列的总数 diff &lt;(wget -q -O - URL1) &lt;(wget -q -O - URL2) 比较两个远程的网页 ​​​​ :r! echo % 在vim中插入当前文件名 cat file | tee &gt;&gt; file 把文件内容贴到他自己的尾巴上(直接cat 不可以) for ARG in * ; do sudo -u USER 7z x -o&quot;$(echo ARG|sed &#039;s/\\(.*\\)\\..*/\\1/&#039;)&quot; &quot;ARG&quot; ; done 解压当前目录下的所有的压缩文件，各个压缩文件都解压在自己的目录中 ssh user@remote-host &quot;DISPLAY=:0.0 import -window root -format png -&quot;|display -format png - 远程截屏 date --date=yesterday +%Y%m%d 格式化另一个日期 ​​​​ history &gt; ~/history-save-$(date +%d-%m-%y-%T) 备份命令历史 for i in &quot;*.txt&quot;; do tar -c -v -z -f i.tar.gz&quot;i.tar.gz &quot;i.tar.gz&quot;i&quot; &amp;&amp; rm -v &quot;$i&quot;; done 压缩所有的txt cat file.txt | sendmail -F myname -f admin@mysite.com guest@guest.com 命令行发邮件 rm $( ls | egrep -v 'abc|\\s' ) 删除除了叫abc的文件 ​​​​ find /path/ -type f -exec grep -l '' {} ; | xargs sed -i -e 's%%%g' 查找并替换 ​​​​ sleep 3s &amp;&amp; espeak &quot;wake up, you bastard&quot; 2&gt;/dev/null 计时器的实现 tar tfz filename.tgz |xargs rm -Rf 撤销解压tar的方法 ​​​​ awk 'BEGIN{IGNORECASE=1;FS=&quot;|&quot;;RS=EOF} {print $2}' file.html 获取html文件中title名字 ​​​​ truncate -s 1M file 创建特定大小的文件 ​​​​ ls -I &quot;*.gz&quot; 反向ls (ls 除了 *.gz) ​​​​ setenforce 0 关闭 SE Linux ​​​​ cat video.avi.001 video.avi.002 video.avi.003 &gt;&gt; video.avi 合并小电影 ​​​​ find -printf '%u %g\\n' | sort | uniq 获取当前目录的文件权限列表 ​​​​ cat .ssh/id_dsa.pub | ssh elsewhere &quot;[ -d .ssh ] || mkdir .ssh ; cat &gt;&gt; .ssh/authorized_keys&quot; 妈妈再也不用担心我忘了ssh密码 ​​​​ git svn --authors-file=some-authors-file clone svn://address/of/svn/repo new-git-dir 导入/克隆一个svn仓库到git仓库 ​​​​ find ~/Desktop/ ( -regex './..' ) -print -exec rm -Rf {} ; 查找删除隐藏文件 ​​​​ cat ~/.viminfo | sed -n '/^:[0-9]+,([0-9]+|$)s/p' 看看今天vim中使用了多少regex ​​​​ echo -n &quot;string&quot; | md5sum - 生成md5 ​​​​ free -m | awk '/Swap/ {print $4}' 释放swap cp -p ls -l | awk '/Apr 14/ {print $NF}' /usr/users/backup_dir 查找特定时间戳的文件 ​​​​ convert *.jpg File_Output.pdf 合并jpg为pdf zmv '(.)(.*)' '${1//./_}$2' 将文件名中的 . 替换成 _ ls -1 /lib/modules 列出安装的 kernels ​​​​ find . -type f -name filename.exe -exec sed -i &quot;s/oldstring/oldstring/g&quot; {} +; 在任何跟'filename.exe'同名的文件中查找并替换目标字符串。 rm !(.foo|.bar|*.baz) Delete all files in a folder that don't match a certain file extension 删除一个目录下所有不匹配特定扩展名的文件 ​​​​ ssh user@remote &quot;tar cfp - /path/to/log/* | gzip&quot; &gt; local.tar.gz 远程压缩后写到本地 ​​​​ find . -mmin -60 -not -path &quot;svn&quot; -print|more 忽略SVN文件和文件夹，递归查找最近一小时内修改过的文件 ​​​​ apt-cache show pkgname | grep -i &quot;version:&quot; 查看包版本 ​​​​ du -s * | sort -nr | head 寻找大文件 ​​​​ lsof | grep pcm 列出正在播放声音的进程 ​​​​ grep 'model|MHz' /proc/cpuinfo |tail -n 2 查看cpu型号 ​​​​ export var1=ps -A | grep '[u]nique' | cut -d '?' -f 1; echo${var1/ /}; kill -9 $var1 在无法使用pidof和pgrep的情况下，杀死PID未知的进程 nocomments () { cat 1 | egrep -v &#039;^[[:space:]]*#|^[[:space:]]*|[1]*;' | sed '//d' | sed '//d'; } 去掉注释 ​​​​ while true ; do sleep 1 ; clear ; (netstat -tn | grep -P ':36089\\s+\\d') ; done 监控端口连接 ​​​​ find . -maxdepth 1 -empty -delete 清理大小为0的文件 ​​​​ while [ /bin/true ]; do OLD=$NEW; NEW=cat /proc/net/dev | grep eth0 | tr -s ' ' | cut -d' ' -f &quot;3 11&quot;; echo $NEW $OLD | awk '{printf(&quot;\\rin 监控 RT/TX ​​​​ for i in *.xml; do sed -i 's/foo/bar/g' &quot;$i&quot;; done 批量替换xml中关键字 sed -n '/^.{255}/!p' 清除多余255个字符的行 rar a -m0 &quot;${PWD##*/}.rar&quot; * 自动命名创建rar的包 ​​​​ read -sn 1 -p &quot;Press any key to continue...&quot; Shell版 Press Any Key to Continue for count in (seq21001);dosay&quot;(seq 2 1001); do say &quot;(seq21001);dosay&quot;count sheeps&quot;;sleep 2;done 催眠 lftp -u&lt;&gt; &lt;&gt; -e &quot;du -a;exit&quot; &gt; server-listing.txt 获取ftp的目录结构 ​​​​ for i in $(find . -mtime +30); do mv $i old/; done 移动30天前的文件到old文件夹 ( ( sleep 2h; your-command your-args ) &amp; ) 在后台2个小时后运行一个命令 grep [#] /etc/file.conf 清理文件中的注释 cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 32 长密码 while t;doforiin‘seq130‘;dor=&quot;t; do for i in `seq 1 30`;do r=&quot;t;doforiin‘seq130‘;dor=&quot;[(RANDOMRANDOM % 2)]&quot;;h=&quot;RANDOM[($RANDOM % 4)]&quot;;if [ $h -eq 1 ]; then v=&quot;\\e[1m $r&quot;;else v=&quot;\\e[2m r&quot;;fi;v2=&quot;r&quot;;fi;v2=&quot;r&quot;;fi;v2=&quot;v2 $v&quot;;done;echo -e $v2;v2=&quot;&quot;;done; 黑客帝国 ​​​​ echo $(( RANDOM % 10 + 1 )) 生成 1 到 10 的随机数 ​​​​ ​​​​ function gbl() { git for-each-ref --sort=-committerdate --format=&#039;%(committerdate) %(authorname) %(refname)&#039; refs/remotes/origin/|grep -e &quot;.@&quot;|head -n 10; } 按作者列出git远程分支 ruby -e &quot;i=0;loop{puts ' '(29(Math.sin(i)/2+1))+'|'(29(Math.cos(i)/2+1)); i+=0.1}&quot; 显示一个波形图案 ​​​​ awk -F&quot;:&quot; '{ print 1 }&#039; /etc/passwd | while read UU ; do STATUS=(passwd -S ${UU} | grep locked 2&gt;/dev/null) ; if [[ ! -z ${STATUS} ]] ; then echo &quot;Account ${UU} is locked.&quot; ; fi ; done 查找某些特定帐户是否被锁住 ​​​​ man -t ls &gt; ls.ps &amp;&amp; pdf2ps ls.ps &amp;&amp; rm ls.ps 将man文档输出为pdf格式 ​​​​ ls * | sed -e 'p;s/foo/bar/' | xargs -n2 mv 用sed批量重命名文件 ​​​​ echo $(shuf -i 1-35 | head -n7 | sort -n) 帮你卖双色球(35选7) ​​​​ find . -type d | sed -e &quot;s/[-][/]*// |/g&quot; -e &quot;s/|([^ ])/|-\\1/&quot; 目录树 ​​​​ ​​​​ echo -e &quot;\\e[3$(( $RANDOM * 6 / 32767 + 1 ))mHello World!&quot; 随机颜色的字 nc -zw2 www.example.com 80 &amp;&amp; echo open 查看tcp端口是不是打开了 ​​​​ myrm(){ D=/tmp/$(date +%Y%m%d%H%M%S); mkdir -p D;mv&quot;D; mv &quot;D;mv&quot;@&quot; $D &amp;&amp; echo &quot;moved to $D ok&quot;; } 建立删除回收机制 UNIX2dos [-kn] oldfile newfile 转换为Linux格式 perl -e &quot;use POSIX qw(strftime); print strftime '%Y%m%d' , localtime( time()-36002430) &quot; perl获取时间 [:space:] ↩︎ ","link":"https://mzqk.github.io/post/linux-chang-yong-shell-ming-ling/"},{"title":"Vim 自定插件","content":"插件 Vundle 插件管理 git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/nerdtree 添加至vimrc &quot;Vundle插件管理 set nocompatible &quot; 去除VI一致性,必须要添加 filetype off &quot; 必须要添加 &quot; 设置包括vundle和初始化相关的runtime path set rtp+=~/.vim/bundle/Vundle.vim call vundle#begin() &quot; 让vundle管理插件版本 Plugin 'VundleVim/Vundle.vim' &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;所有插件需要在下面这行上面 &quot;安装插件的方式可以使用本地、git及网络安装 &quot;示例 &quot;Plugin 'git://git.wincent.com/command-t.git' &quot;Plugin 'file:///home/gmarik/path/to/plugin' &quot;Plugin 'tpope/vim-fugitive' &quot;重名插件 &quot;Plugin 'rstacruz/sparkup', {'rtp': 'vim/'} call vundle#end() &quot; required filetype plugin indent on &quot; required &quot; 忽视插件改变缩进,可以使用以下替代: &quot;filetype plugin on &quot; 常用的命令 &quot; :PluginList - 列出所有已配置的插件 &quot; :PluginInstall - 安装插件,追加 `!` 用以更新或使用 :PluginUpdate &quot; :PluginSearch foo - 搜索 foo ; 追加 `!` 清除本地缓存 &quot; :PluginClean - 除未使用插件,需要确认; 追加 `!` 自动批准移除未使用插件 &quot; :h vundle 查看帮助 &quot; 将你自己对非插件片段放在这行之后 NerdTree 目录树 &quot; 设置NerdTree &quot;Plugin 'scrooloose/nerdtree' let NERDTreeWinPos='left' let NERDTreeWinSize=30 map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt; &quot;默认开启NERDTree &quot;autocmd VimEnter * NERDTree &quot;当打开 NERDTree 窗口时，自动显示 Bookmarks let NERDTreeShowBookmarks=1 &quot; 是否显示隐藏文件 let NERDTreeShowHidden=1 使用说明 ?: 快速帮助文档 o: 打开一个目录或者打开文件，创建的是buffer，也可以用来打开书签 go: 打开一个文件，但是光标仍然留在NERDTree，创建的是buffer t: 打开一个文件，创建的是Tab，对书签同样生效 T: 打开一个文件，但是光标仍然留在NERDTree，创建的是Tab，对书签同样生效 i: 水平分割创建文件的窗口，创建的是buffer gi: 水平分割创建文件的窗口，但是光标仍然留在NERDTree s: 垂直分割创建文件的窗口，创建的是buffer gs: 和gi，go类似 x: 收起当前打开的目录 X: 收起所有打开的目录 e: 以文件管理的方式打开选中的目录 D: 删除书签 P: 大写，跳转到当前根路径 p: 小写，跳转到光标所在的上一级路径 K: 跳转到第一个子路径 J: 跳转到最后一个子路径 &lt;C-j&gt;和&lt;C-k&gt;: 在同级目录和文件间移动，忽略子目录和子文件 C: 将根路径设置为光标所在的目录 u: 设置上级目录为根路径 U: 设置上级目录为跟路径，但是维持原来目录打开的状态 r: 刷新光标所在的目录 R: 刷新当前根路径 I: 显示或者不显示隐藏文件 f: 打开和关闭文件过滤器 q: 关闭NERDTree A: 全屏显示NERDTree，或者关闭全屏 .vimrc set fileencodings=utf-8,gbk set termencoding=utf-8 set encoding=utf-8 syntax on &quot;语法高亮 set nocompatible &quot;关闭vi兼容模式 set nu &quot;显示行号 set ruler &quot;打开状态栏标尺 set softtabstop=4 &quot;退格键删除4个空格 set tabstop=4 &quot;设置tab长度为 4 set nobackup &quot;覆盖文件不备份 set autochdir &quot;自动切换当前目录 set hlsearch &quot;搜索高亮 set magic &quot;设置魔术 set smartindent &quot;自动缩行 set backspace=indent,eol,start set laststatus=2 &quot;显示状态栏 set bg=dark &quot;暗色背景 &quot;history存储容量 set history=2000 &quot;检测文件类型，采用不同的缩进格式 filetype on filetype indent on set autoindent &quot;备份设置 &quot;set backup &quot;set backupext=.bak &quot;set backupdir=~/.bak/ &quot;突出显示 set cursorcolumn set cursorline &quot;设置退出显示的内容 set t_ti= t_te= &quot;显示状态栏内容 set ruler set showcmd set showmode &quot;搜索显示 set showmatch set hlsearch set ignorecase &quot;取消方向键 &quot;map &lt;Left&gt; &lt;Nop&gt; &quot;map &lt;Right&gt; &lt;Nop&gt; &quot;map &lt;Up&gt; &lt;Nop&gt; &quot;map &lt;Down&gt; &lt;Nop&gt; &quot;python文件设置 autocmd FileType python set tabstop=4 shiftwidth=4 expandtab ai func! DeleteTrailingWS() exe &quot;normal mz&quot; %s/\\s\\+$//ge exe &quot;normal `z&quot; endfunc autocmd BufWrite *.py :call DeleteTrailingWS() &quot;脚本文件加入文件头 autocmd BufNewFile *.sh,*.py `exec` &quot;:call SetTitle()&quot; func SetTitle() if &amp;filetype == 'python' call setline(1, &quot;\\#!/usr/bin/env python&quot;) call setline(2, &quot;\\# -*- encoding:utf-8 -*-&quot;) endif if &amp;filetype == 'sh' call setline(1, &quot;\\#!/usr/bin/sh&quot;) endif endfunc &quot;&lt;F2&gt;开关行号 function! HideNumber() if(&amp;relativenumber == &amp;number) set relativenumber! number! elseif(&amp;number) set number! else set relativenumber! endif set number? endfunc nnoremap &lt;F2&gt; :call HideNumber()&lt;CR&gt; &quot;===========================================================&quot; &quot; 设置pydiction &quot;===========================================================&quot; let g:pydiction_location='~/.vim/bundle/pydiction/complete-dict' &quot;菜单高度 let g:pydiction_menu_height = 3 &quot;===========================================================&quot; &quot; 设置NerdTree &quot;===========================================================&quot; &quot;设置目录树位置 let NERDTreeWinPos='left' let NERDTreeWinSize=30 &quot;&lt;F3&gt;开关目录树 map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt; &quot;默认开启NERDTree &quot;autocmd VimEnter * NERDTree &quot;当打开 NERDTree 窗口时，自动显示 Bookmarks let NERDTreeShowBookmarks=1 &quot; 是否显示隐藏文件 let NERDTreeShowHidden=1 &quot;设置&lt;F4&gt;保存文件 map &lt;F4&gt; :&lt;ESC&gt;:w&lt;CR&gt; &quot;===========================================================&quot; &quot;Vundle插件管理 &quot;===========================================================&quot; set nocompatible &quot; 去除VI一致性,必须要添加 filetype off &quot; 必须要添加 &quot; 设置包括vundle和初始化相关的runtime path set rtp+=~/.vim/bundle/Vundle.vim call vundle#begin() &quot; 让vundle管理插件版本 Plugin 'VundleVim/Vundle.vim' Plugin 'scrooloose/nerdtree' Plugin 'rkulla/pydiction' &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;所有插件需要在下面这行上面 &quot;安装插件的方式可以使用本地、git及网络安装 &quot;示例 &quot;Plugin 'git://git.wincent.com/command-t.git' &quot;Plugin 'file:///home/gmarik/path/to/plugin' &quot;Plugin 'tpope/vim-fugitive' &quot;重名插件 &quot;Plugin 'rstacruz/sparkup', {'rtp': 'vim/'} call vundle#end() &quot; required filetype plugin indent on &quot; required &quot; 忽视插件改变缩进,可以使用以下替代: &quot;filetype plugin on ","link":"https://mzqk.github.io/post/vim-zi-ding-cha-jian/"},{"title":"Shell 教程基础教程","content":"变量 变量数组 var_name=(varlue0 value1 varlue2 varlue3) name[n]=varlue 只读变量 readonly=varlue 删除变量 unset var_nam 特殊变量 变量 含义 $0 当前脚本的文件名 $n 传递给脚本或函数的参数。n是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。 $# 传递给脚本或函数的参数个数。 $@ 传递给脚本或函数的所有参数。 $* 传递给脚本或函数的所有参数。被双引号(&quot;&quot;)包含时，与$@稍有不同。 $? 上个命令的退出状态，或函数的返回值。 $$ 当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。 运算符 算数运算符 运算符 说明 举例 + 加法 expr $a + $b 结果为 30。 - 减法 expr $a - $b 结果为 -10。 * 乘法 expr $a \\* $b 结果为 200。 / 除法 expr $b / $a 结果为 2。 % 取余 expr $b % $a 结果为 0。 = 赋值 a=$b 将把变量 b 的值赋给 a。 == 相等 用于比较两个数字，相同则返回 true。 [ $a == $b ] 返回 false。 != 不相等 用于比较两个数字，不相同则返回 true。 [ $a != $b ] 返回 true。 关系运算符 运算符 说明 举例 -eq 检测两个数是否相等，相等返回 true。 [ $a -eq $b ] 返回 false。 -ne 检测两个数是否相等，不相等返回 true。 [ $a -ne $b ] 返回 true。 -gt 检测左边的数是否大于右边的，如果是，则返回 true。 [ $a -gt $b ] 返回 false。 -lt 检测左边的数是否小于右边的，如果是，则返回 true。 [ $a -lt $b ] 返回 true。 -ge 检测左边的数是否大于等于右边的，如果是，则返回 true。 [ $a -ge $b ] 返回 false。 -le 检测左边的数是否小于等于右边的，如果是，则返回 true。 [ $a -le $b ] 返回 true。 逻辑运算符 运算符 说明 举例 &amp;&amp; 逻辑的 AND [[ $a -lt 100 &amp;&amp; $b -gt 100 ]] 返回 false ll 逻辑的 OR [[ $a -lt 100 ll $b -gt 100 ]] 返回 true 环境配置 流程控制 if分支 if [条件判断] ;then 条件执行 if case分支 case $变量 in &quot;变量1&quot;) command1 ;; &quot;变量2&quot;) command2 ;; *） exit 1 ；； esac for循环 常用语法 for $变量 in var do command done c语言语法 num=n for ((a=1;a &lt;= num; a+1 )) do comand done while循环 while [条件判断] do command done c语言语法 ((a=1)) num=n while ((a &lt;= num)) do command done until循环 until [条件判断] do command done select结构 PS3=' 设置提示符字串 ' select $变量 in var do command break done 函数 function funname () { command } ","link":"https://mzqk.github.io/post/shell-jiao-cheng-ji-chu-jiao-cheng/"},{"title":"Linux 常用命令","content":"awk awk语法 参数 说明 -F 以指定字符作为分割字段 awk用法 打印/etc/passwd内容 awk '{print}' /etc/passwd root❌0:0:root:/root:/bin/bash daemon❌1:1:daemon:/usr/sbin:/usr/sbin/nologin bin❌2:2:bin:/bin:/usr/sbin/nologin sys❌3:3:sys:/dev:/usr/sbin/nologin sync❌4:65534:sync:/bin:/bin/sync games❌5:60:games:/usr/games:/usr/sbin/nologin man❌6:12👨/var/cache/man:/usr/sbin/nologin lp❌7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail❌8:8:mail:/var/mail:/usr/sbin/nologin news❌9:9:news:/var/spool/news:/usr/sbin/nologin uucp❌10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy❌13:13:proxy:/bin:/usr/sbin/nologin www-data❌33:33:www-data:/var/www:/usr/sbin/nologin backup❌34:34:backup:/var/backups:/usr/sbin/nologin 以冒号为分隔符取1、3、6位内容 awk -F &quot;:&quot; '{print $1 $3 $6}' /etc/passwd bin2/bin sys3/dev sync4/bin games5/usr/games man6/var/cache/man lp7/var/spool/lpd mail8/var/mail news9/var/spool/news uucp10/var/spool/uucp proxy13/bin www-data33/var/www backup34/var/backups 取出内容以Tab建作为分隔符 awk -F &quot;:&quot; '{print $1 &quot;\\t&quot; $3 &quot;\\t&quot; $6}' /etc/passwd root 0 /root daemon 1 /usr/sbin bin 2 /bin sys 3 /dev sync 4 /bin games 5 /usr/games man 6 /var/cache/man lp 7 /var/spool/lpd mail 8 /var/mail news 9 /var/spool/news uucp 10 /var/spool/uucp proxy 13 /bin www-data 33 /var/www backup 34 /var/backups 内容加以排版 awk -F &quot;:&quot; '{print &quot;ID=&quot;$1 &quot;\\t 家目录=&quot;$6}' /etc/passwd ID=root 家目录=/root ID=daemon 家目录=/usr/sbin ID=bin 家目录=/bin ID=sys 家目录=/dev ID=sync 家目录=/bin ID=games 家目录=/usr/games ID=man 家目录=/var/cache/man ID=lp 家目录=/var/spool/lpd ID=mail 家目录=/var/mail ID=news 家目录=/var/spool/news ID=uucp 家目录=/var/spool/uucp ID=proxy 家目录=/bin ID=www-data 家目录=/var/www ID=backup 家目录=/var/backups crontab crontab语法 -l 列出定时任务列表 -e 编辑定时任务内容 -u 设定指定用户 crontab用法 星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。 逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9” 中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6” 正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。 cat chattr date find expr git Git 配置 添加git信息 git config --global user.name &quot;Scott Chacon&quot; git config --global user.email &quot;schacon@gmail.com&quot; # --global 为全局选项 git信息配置文件 ~/.gitconfig Git仓库 克隆一个项目 git clone https://github.com/MZqk/boco 初始化一个仓库 cd ./ git init Git流程 git add #添加新创建或修改的文件到本地的缓存区（Index） git rm #删除后会自动将已删除文件的信息添加到缓存区 git commit #命令提交到本地代码库 git status #查看当前git仓库的状态 git diff --cached #如果没有--cached参数，git diff 会显示当前你所有已做的但没有加入到索引里的修改 git push origin master #将本地仓库同步到远端服务器 分支与合并 git branch #查看当前的分支列表 git branch experimental #创建一个新的叫 experimental的分支 git checkout experimental #切换到experimental分支 git merge -m 'merge experimental branch' experimental #将experimental分支合并到当前分支 git branch -d experimental #只能删除那些已经被当前分支的合并的分支. 如果你要强制删除某个分支的话就用git branch –D git reset --hard HEAD^ #回到合并之前的状态 Git日志 git log #显示所有的提交 git log v2.5.. Makefile fs/ #找出所有从&quot;v2.5“开始在fs目录下的所有Makefile的修改 git log --stat 打印详细的提交记录 git log --pretty=oneline 格式化日志输出,可用medium,full,fuller,email 或raw git log --graph --pretty=oneline 可视化提交图 git log --pretty=format:'%h : %s' --topo-order --graph 提交按拓扑顺序来显示 grep sed sed语法 参数 说明 -n 显示处理后的过程，自动换行 sed用法 文件内容 line 1 This is a book line 2 That is a pen line 3 Happy Holiday line 4 Niscenter is a good place line 5 End 删除第2到4行内容 sed '2,4d' file line 1 This is a book line 5 End 替换每行第一个is为error sed 's/is/error/' file line 1 Therror is a book line 2 That error a pen line 3 Happy Holiday line 4 Nerrorcenter is a good place line 5 End 替换全部的is为error sed 's/is/error/g' file line 1 Therror error a book line 2 That error a pen line 3 Happy Holiday line 4 Nerrorcenter error a good place line 5 End 在有center内容的一行替换is为xx sed '/center/s/is/xx/g' file line 1 This is a book line 2 That is a pen line 3 Happy Holiday line 4 Nxxcenter xx a good place line 5 End tar tar语法 参数 说明 -c --crate 创建新的归档,即打包 -r --append 向压缩文件追加内容 -t --list 查看压缩全部的内容 -u --update 更新压缩文件 -x --extract 释放归档文件，即解压 -v 显示操作过程 -z 解压tar.gz、tgz文件选项 -j 解压tar.bz2文件 -f 制定压缩文件名 -C 切换至指定目录 --exclude file 压缩过程中排除指定文件 tar用法 tar tar -xvf filename.tar tar -cvf filename.tar dirname tar.gz tar -zxvf filename.tar.gz tar -zxcf filename.tar.gz dirname tar.bz2 tar -jxvf filename.tar.bz2 tar -jxcf filename.tar.bz2 dirname test test语法 参数 说明 -d 如果文件为一个目录，则为真 -e 如果文件存在，则为真 -G 如果文件存在且归该组所有，则为真 -O 如果文件存在并且归该用户所有，则为真 -s 如果文件的长度不为零，则为真 -r 如果文件可读，则为真 -w 如果文件可写，则为真 -x 如果文件可执行，则为真 -eq 数值等于,则为真 -ne 数值不等于,则为真 -gt 数值大于,则为真 -ge 数值小于等于,则为真 -lt 数值小于,则为真 -le 数值小于等于,则为真 = 字符相等，则为真 != 字符不相等，则为真 -z 字符串长度为零，则为真 -n 字符串长度不为零，则为真 Shell还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为：&quot;!&quot;最高，&quot;-a&quot;次之，&quot;-o&quot;最低。 test用法 文件测试 cd /bin if test -e ./bash then echo '文件已存在!' else echo '文件不存在!' fi 输出结果 文件已存在! 数值测试 num1=100 num2=100 if test $[num1] -eq $[num2] then echo '两个数相等！' else echo '两个数不相等！' fi 输出结果 两个数相等！ 字符串测试 num1=&quot;ru1noob&quot; num2=&quot;runoob&quot; if test $num1 = $num2 then echo '两个字符串相等!' else echo '两个字符串不相等!' fi 输出结果 两个字符串不相等! xarge ","link":"https://mzqk.github.io/post/linux-chang-yong-ming-ling/"},{"title":"Oracle Sysdate 时间函数","content":"Oracle 时间函数 天粒度 SELECT TRUNC(sysdate,'DD') FROM dual; sysdate+1 加一天 小时粒度 取10天前0点 SELECT TRUNC(sysdate-10,'DD') FROM dual; 取3小时前 SELECT TRUNC(sysdate-3/24,'HH') FROM dual; select sysdate - 3/24 from taa_onerow sysdate+1/24 加1小时 分钟粒度 sysdate+1/(2460) 加1分钟 sysdate+1/(2460*60) 加1秒钟 类推至毫秒0.001秒 函数运算 加法 select sysdate,add_months(sysdate,12) from dual; --加1年 select sysdate,add_months(sysdate,1) from dual; --加1月 select sysdate,to_char(sysdate+7,'yyyy-mm-dd HH24:MI:SS') from dual; --加1星期 select sysdate,to_char(sysdate+1,'yyyy-mm-dd HH24:MI:SS') from dual; --加1天 select sysdate,to_char(sysdate+1/24,'yyyy-mm-dd HH24:MI:SS') from dual; --加1小时 select sysdate,to_char(sysdate+1/24/60,'yyyy-mm-dd HH24:MI:SS') from dual; --加1分钟 select sysdate,to_char(sysdate+1/24/60/60,'yyyy-mm-dd HH24:MI:SS') from dual; --加1秒 减法 select sysdate,add_months(sysdate,-12) from dual; --减1年 select sysdate,add_months(sysdate,-1) from dual; --减1月 select sysdate,to_char(sysdate-7,'yyyy-mm-dd HH24:MI:SS') from dual; --减1星期 select sysdate,to_char(sysdate-1,'yyyy-mm-dd HH24:MI:SS') from dual; --减1天 select sysdate,to_char(sysdate-1/24,'yyyy-mm-dd HH24:MI:SS') from dual; --减1小时 select sysdate,to_char(sysdate-1/24/60,'yyyy-mm-dd HH24:MI:SS') from dual; --减1分钟 select sysdate,to_char(sysdate-1/24/60/60,'yyyy-mm-dd HH24:MI:SS') from dual; --减1秒 ","link":"https://mzqk.github.io/post/oracle-sysdate-shi-jian-han-shu/"},{"title":"安装 Hadoop","content":"安装java环境 安装jdk 设置java环境变量 vim /etc/profile export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/ eport JRE_HOME=$JAVA_HOME/jre eport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME:lib:$CLASPATH export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH 下载hadoop源码包 配置文件在hadoop目录下conf hadoop-env.sh mapred-site.xml core-site.xml hadfs-site.xml 设置hadoop环境变量 格式化操作 hadoop namenode - fromat jps查看hadoop运行进程 hadoop基础命令 hadoop fs -ls / hadoop fs -mkdir filename hadoop fs -put file filename/ hadoop fs -cat filename/file hadoop fs -get filename/file newfile hadoop dfsadmin -report #查看hadoop文件信息 hive安装 下载hive安装包 hive目录lib导入mysql.jar包 配置文件在hive目录下conf hive-env.sh hive-site.xml mysql连接url地址 mysql驱动名字 用户名 密码 hive CLI模式 ","link":"https://mzqk.github.io/post/an-zhuang-hadoop/"},{"title":"Markdown 基础使用","content":"目录 [TOC] 标题 一级标题 二级标题 三级标题 四级标题 五级标题 无序列表 1 2 3 有序列表 1 2 3 引用 这里是引用 图片 链接 百度 粗体 这是粗体 斜体 这是斜体 表格 Tables Are Cool col 3 is right-aligned $1600 col 2 is centered $12 zebra stripes are neat $1 代码框 #include&lt;stdio.h&gt; int mian() { printf(&quot;Hello world !\\n&quot;); return 0; } 分割线 代办列表 1 2 流程图 graph LR A--&gt;B 时序图 sequenceDiagram A-&gt;&gt;B: How are you? B-&gt;&gt;A: Great! 甘特图 gantt dateFormat YYYY-MM-DD section S1 T1: 2014-01-01, 9d section S2 T2: 2014-01-11, 9d section S3 T3: 2014-01-02, 9d ","link":"https://mzqk.github.io/post/markdown-ji-chu-shi-yong/"},{"title":"Vim 基础使用","content":"一般模式 h j k l ← ↓ ↑ → 命令 说明 w 下一个单词 b 上一个单词 0 行首 $ 行末 G 最后一行 gg,1G 最上一行 ctrl+f 向下翻页 ctrl+b 向上翻页 n 后移n个字符 操作 解释 /word 向下查找 ?word 向上查找 dd 删除一行 yy 复制一行 p,P 粘贴 u 还原 j 合并下一行 块选择 命令 说明 v 字符选择 V 列选择 ctrl+v 快选择 编辑模式 命令 说明 i 在当前光标插入 I 在行首插入 A 在行末加入 a 在光标后插入 o 添加至下一行 O 添加至上一行 命令模式 命令 说明 wq 保存退出 r[filename] 添加文件内容 w[filename] 另存为 !command 命令行 s/word1/word2/g 替换内容 多文件编辑 多窗口模式 命令 说明 :sp filename 在新窗口打开文件 crtl+w+j 向下编辑窗口文件 crtl+w+k 向上编辑窗口文件 crtl+w+k 结束窗口文件 ","link":"https://mzqk.github.io/post/vim-ji-chu-shi-yong/"},{"title":"使用 Linux 远程连接 Windows","content":"办公环境为windows server2003与server2008 确保连接公司专线（或则挂载公司VPN）++修改IPv4的ip地址与网关掩码++ 查看本机网卡配置 ifconfig 添加路由 route add -net 10.175.0.0 netmask 255.255.0.0 gw 10.175.24.254 dev eth0 修改网关 route add -vF 10.175.0.0 netmask 255.255.0.0 gw 10.175.24.254 dev eth0 linux使用的软件为 remmina freerdp ","link":"https://mzqk.github.io/post/shi-yong-linux-yuan-cheng-lian-jie-windows/"},{"title":"Linux管理用户","content":"添加用户名 useradd -m name 创建用户指定家目录 useradd -d /home/name -m name 修改用户家目录 usermod -d /home/newname name 允许用户使用SSH登入 vim /etc/ssh/sshd_config AllowUsers name 修改用户默认shell 1.useradd --shell /usr/bin/zsh name 2.vim /etc/passwd name.....：/usr/bin/zsh 给予用户root权限 1.usermod -aG sudo name 2.vim /etc/sudoers name ALL(ALL:ALL) ALL ","link":"https://mzqk.github.io/post/linux-guan-li-yong-hu/"},{"title":"我的 Bash 配置","content":"# ~/.bashrc: executed by bash(1) for non-login shells. # see /usr/share/doc/bash/examples/startup-files (in the package bash-doc) # for examples # If not running interactively, don't do anything case $- in *i*) ;; *) return;; esac # don't put duplicate lines or lines starting with space in the history. # See bash(1) for more options HISTCONTROL=ignoreboth # append to the history file, don't overwrite it shopt -s histappend # for setting history length see HISTSIZE and HISTFILESIZE in bash(1) HISTSIZE=1000 HISTFILESIZE=2000 # check the window size after each command and, if necessary, # update the values of LINES and COLUMNS. shopt -s checkwinsize # If set, the pattern &quot;**&quot; used in a pathname expansion context will # match all files and zero or more directories and subdirectories. #shopt -s globstar # make less more friendly for non-text input files, see lesspipe(1) [ -x /usr/bin/lesspipe ] &amp;&amp; eval &quot;$(SHELL=/bin/sh lesspipe)&quot; # set variable identifying the chroot you work in (used in the prompt below) if [ -z &quot;${debian_chroot:-}&quot; ] &amp;&amp; [ -r /etc/debian_chroot ]; then debian_chroot=$(cat /etc/debian_chroot) fi # set a fancy prompt (non-color, unless we know we &quot;want&quot; color) case &quot;$TERM&quot; in xterm-color|*-256color) color_prompt=yes;; esac # uncomment for a colored prompt, if the terminal has the capability; turned # off by default to not distract the user: the focus in a terminal window # should be on the output of commands, not on the prompt #force_color_prompt=yes if [ -n &quot;$force_color_prompt&quot; ]; then if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then # We have color support; assume it's compliant with Ecma-48 # (ISO/IEC-6429). (Lack of such support is extremely rare, and such # a case would tend to support setf rather than setaf.) color_prompt=yes else color_prompt= fi fi if [ &quot;$color_prompt&quot; = yes ]; then PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ ' else PS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ ' fi unset color_prompt force_color_prompt # If this is an xterm set the title to user@host:dir case &quot;$TERM&quot; in xterm*|rxvt*) PS1=&quot;\\[\\e]0;${debian_chroot:+($debian_chroot)}\\u@\\h: \\w\\a\\]$PS1&quot; ;; *) ;; esac # enable color support of ls and also add handy aliases if [ -x /usr/bin/dircolors ]; then test -r ~/.dircolors &amp;&amp; eval &quot;$(dircolors -b ~/.dircolors)&quot; || eval &quot;$(dircolors -b)&quot; alias ls='ls --color=auto' #alias dir='dir --color=auto' #alias vdir='vdir --color=auto' alias grep='grep --color=auto' alias fgrep='fgrep --color=auto' alias egrep='egrep --color=auto' fi # colored GCC warnings and errors #export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01' # some more ls aliases alias ll='ls -alF' alias la='ls -A' alias l='ls -CF' alias rm='rm -i' # Add an &quot;alert&quot; alias for long running commands. Use like so: # sleep 10; alert alias alert='notify-send --urgency=low -i &quot;$([ $? = 0 ] &amp;&amp; echo terminal || echo error)&quot; &quot;$(history|tail -n1|sed -e '\\''s/^\\s*[0-9]\\+\\s*//;s/[;&amp;|]\\s*alert$//'\\'')&quot;' # Alias definitions. # You may want to put all your additions into a separate file like # ~/.bash_aliases, instead of adding them here directly. # See /usr/share/doc/bash-doc/examples in the bash-doc package. if [ -f ~/.bash_aliases ]; then . ~/.bash_aliases fi # enable programmable completion features (you don't need to enable # this, if it's already enabled in /etc/bash.bashrc and /etc/profile # sources /etc/bash.bashrc). if ! shopt -oq posix; then if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; then . /etc/bash_completion fi fi ","link":"https://mzqk.github.io/post/wo-de-bash-pei-zhi/"},{"title":"安装 LAMP","content":"安装LAMP服务 Linux Apache 安装apache 服务器ip查看运行状态 Mysql 安装mysql 查看php操作模块 /etc/php7/conf.d/mysql.ini 添加php操作模块 php7.0-mysql PHP 安装php 查看php加载模块 /etc/apache2/mods-enabled/php7.load /usr/lib/apache2/modules/libphp7.so 服务器phpinfo探针 /var/www/info.php &lt;?php echo mysql_connect('localhost','root','123456') ? '连接成功' ： '连接失败'； phpinfo(); php扩展 php7.0-gd curl libcurl3 libcurl3-dev php7.0-curl LAMP配置文件 L：/etc A：/etc/apache2 apache.conf 1.conf.d/* 2.httpd.conf 3.mods-enabled/* 4.sites-enabled/* -mods* Apache模块 -sites* 虚拟主机 M:/etc/mysql 核心配置文件my.cnf P:/etc/php7.0 核心配置文件php.ini ","link":"https://mzqk.github.io/post/an-zhuang-lamp/"},{"title":"Hadoop 常见问题","content":"常见问题及处理 mysql版本，必须是MYSQL5.1。 查询办法mysqladmin version 在建立hive数据库的时候，最好是:create database hive; oozie的数据库，同样：create database oozie; hadoop采集的字符集问题。 修改/etc/sysconfig/i18n 更改字符集为en_US.UTF-8 重启机器生效。 重启机器的指令为：在root下敲入如下指令：sync;sync;init 6 修改mapreduce。 在gateway/性能下修改：MapReduce 子 Java 基础选项 、Map 任务 Java 选项库 、Reduce 任务 Java 选项库 全部配置成 -Xmx4294967296 在TASKTRACKER/性能下修改:MapReduce 子 Java 基础选项 、Map 任务 Java 选项库 、Reduce 任务 Java 选项库 全部配置成 -Xmx4294967296 必须关注各个任务的详细情况 当出现如下的错误的时候，请及时的将下载的进程数调小。 vi /home/boco/oozie_wy/config/lte/mro/ftp/807101.xml 将max_thread由原来的6个调整为3个,或者协调厂家加大FTP的最大线程数。 stderr logs： org.apache.commons.net.ftp.FTPConnectionClosedException: FTP response 421 received. Server closed connection. at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:363) at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290) at org.apache.commons.net.ftp.FTP.connectAction(FTP.java:396) at org.apache.commons.net.ftp.FTPClient.connectAction(FTPClient.java:796) at org.apache.commons.net.SocketClient.connect(SocketClient.java:172) at org.apache.commons.net.SocketClient.connect(SocketClient.java:192) at org.apache.commons.net.SocketClient.connect(SocketClient.java:285) at com.boco.wangyou.utils.Ftp.connectServer(Ftp.java:550) at com.boco.wangyou.lte.mro.ftp.tools.FindFileThread.run(FindFileThread.java:67) 登录ftp服务器【10.140.177.149】失败，FTP服务器无法打开！ org.apache.commons.net.ftp.FTPConnectionClosedException: FTP response 421 received. Server closed connection. at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:363) at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290) at org.apache.commons.net.ftp.FTP.connectAction(FTP.java:396) at org.apache.commons.net.ftp.FTPClient.connectAction(FTPClient.java:796) at org.apache.commons.net.SocketClient.connect(SocketClient.java:172) at org.apache.commons.net.SocketClient.connect(SocketClient.java:192) at org.apache.commons.net.SocketClient.connect(SocketClient.java:285) at com.boco.wangyou.utils.Ftp.connectServer(Ftp.java:550) at com.boco.wangyou.lte.mro.ftp.tools.FindFileThread.run(FindFileThread.java:67) 登录ftp服务器【10.140.177.149】失败，FTP服务器无法打开！ org.apache.commons.net.ftp.FTPConnectionClosedException: FTP response 421 received. Server closed connection. at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:363) at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290) at org.apache.commons.net.ftp.FTP.connectAction(FTP.java:396) at org.apache.commons.net.ftp.FTPClient.connectAction(FTPClient.java:796) at org.apache.commons.net.SocketClient.connect(SocketClient.java:172) at org.apache.commons.net.SocketClient.connect(SocketClient.java:192) TASKTRACKER和HDFS组的问题 发现部分地方在安装的时候，将所有的机器分组的问题。 如果分组，需要将每个组的参数都要修改。 目前发现很多的地方，TASKTRACKER和HDFS都分了组，但是只修改一组的参数，造成系统大量出问题。 java heap size以及tasktracker被拉黑名单的问题。 namenode和datanode的内存配置问题。 建议将使用的内存修改为4G左右。 建议将HIVE2服务放到一个辅节点上。 hive2放到辅节点上，经常出现add_partation挂起报错。 解决HIVE经常挂死的问题 修改zookeeper的最大客户端连接数，maxClientCnxns修改为3600或者修改成0不限制 自动清空时间间隔，autopurge.purgeInterval 修改为1小时 厂家XML配置的问题。 如果厂家是这样的：/data/dataservice/mr/ltemro/huawei/20140815/01/362323/TD-LTE_MRO_HUAWEI_010133150144_362323_20140815011500.xml.gz 建议配置成这样的： 路径：/data/dataservice/mr/ltemro/huawei/TIMETIMETIME/ENODEBENODEBENODEB 时间格式：yymmdd/hh 在/home/boco/oozie_wy/config/lte/mro/ftp下禁止存放.bak文件 有一个省份的mapper数超多，导致解析很长时间没有完成。 进一步发现FTP在合并文件的时候报错，再进一步发现同一个IP地址，同一个OMC启动了三个mapper进程去下载数据导致文件合并失败。 发现是修改了ftp.xml文件，没有删除原来的文件，而是以一个bak文件存放。 删除这些bak文件，mapper数量正常。 原mapper数1731个，删除之后mapper数41个,采集正常。 打开50030看FTP的日志，存在如下的报错： java.io.FileNotFoundException: File does not exist: /user/boco/cache/wy/ltemro/1411032293348/xml/155/2014-09-18_11/TD-LTE_MRO_ERICSSON_OMC1_303024_20140918111500.xml.zip at org.apache.hadoop.hdfs.server.namenode.INodeFile.valueOf(INodeFile.java:39) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocationsUpdateTimes(FSNamesystem.java:1341) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocationsInt(FSNamesystem.java:1293) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1269) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1242) at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:392) at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.getBlockLocations(ClientNamenodeProtocolServerSideTranslatorPB.java:172) at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44938)atorg.apache.hadoop.ipc.ProtobufRpcEngine2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44938) at org.apache.hadoop.ipc.ProtobufRpcEngine2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44938)atorg.apache.hadoop.ipc.ProtobufRpcEngineServerProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)atorg.apache.hadoop.ipc.RPCProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) at org.apache.hadoop.ipc.RPCProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)atorg.apache.hadoop.ipc.RPCServer.call(RPC.java:1002) at org.apache.hadoop.ipc.Server$Handler1.run(Server.java:1701)atorg.apache.hadoop.ipc.Server1.run(Server.java:1701) at org.apache.hadoop.ipc.Server1.run(Server.java:1701)atorg.apache.hadoop.ipc.ServerHandler1.run(Server.java:1697)atjava.security.AccessController.doPrivileged(NativeMethod)或者：org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException):Leasemismatchon/user/boco/cache/wy/ltemro/1411032293348/xml/155/2014−09−1811/TD−LTEMROERICSSONOMC1303020140918.xmlownedbyDFSClientNONMAPREDUCE−12748272121butisaccessedbyDFSClientNONMAPREDUCE−2166139051atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2459)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2437)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:2503)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:2480)atorg.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.complete(NameNodeRpcServer.java:535)atorg.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.complete(ClientNamenodeProtocolServerSideTranslatorPB.java:337)atorg.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos1.run(Server.java:1697) at java.security.AccessController.doPrivileged(Native Method) 或者： org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException): Lease mismatch on /user/boco/cache/wy/ltemro/1411032293348/xml/155/2014-09-18_11/TD-LTE_MRO_ERICSSON_OMC1_3030_20140918.xml owned by DFSClient_NONMAPREDUCE_-1274827212_1 but is accessed by DFSClient_NONMAPREDUCE_-216613905_1 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2459) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2437) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:2503) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:2480) at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.complete(NameNodeRpcServer.java:535) at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.complete(ClientNamenodeProtocolServerSideTranslatorPB.java:337) at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos1.run(Server.java:1697)atjava.security.AccessController.doPrivileged(NativeMethod)或者：org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException):Leasemismatchon/user/boco/cache/wy/ltemro/1411032293348/xml/155/2014−09−181​1/TD−LTEM​ROE​RICSSONO​MC13​0302​0140918.xmlownedbyDFSClientN​ONMAPREDUCE−​12748272121​butisaccessedbyDFSClientN​ONMAPREDUCE−​2166139051​atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2459)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:2437)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:2503)atorg.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:2480)atorg.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.complete(NameNodeRpcServer.java:535)atorg.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.complete(ClientNamenodeProtocolServerSideTranslatorPB.java:337)atorg.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtosClientNamenodeProtocol2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44958)atorg.apache.hadoop.ipc.ProtobufRpcEngine2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44958) at org.apache.hadoop.ipc.ProtobufRpcEngine2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44958)atorg.apache.hadoop.ipc.ProtobufRpcEngineServerProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)atorg.apache.hadoop.ipc.RPCProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453) at org.apache.hadoop.ipc.RPCProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)atorg.apache.hadoop.ipc.RPCServer.call(RPC.java:1002) REDIS故障 解析时候报错，错误如下： redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool at redis.clients.util.Pool.getResource(Pool.java:22) at com.boco.wangyou.utils.JedisUtils.getJedis(JedisUtils.java:47) at com.boco.wangyou.utils.JedisUtils.getTableValues(JedisUtils.java:119) at com.boco.wangyou.lte.mro.tdl.tools.LteMroXMLParser.(LteMroXMLParser.java:82) at com.boco.wangyou.lte.mro.tdl.XMLParseMapper.map(XMLParseMapper.java:44) at com.boco.wangyou.lte.mro.tdl.XMLParseMapper.map(XMLParseMapper.java:18) at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:140) 此问题一般是因为REDIS没有启动导致。 克隆机器安装的问题 把一个节点的第二步都装好了，把它克隆到其它主机上，再把克隆到的主机的IP （注意在修改IP配置文件的时候，将HWaddr也改了，一般是这种格式：00:50:56:80:4E:D6， 否则在连接时会找不到硬盘）和主机名改下。 此种情况主要出现在使用vmvare vsphere克隆导致的。 注意： 克隆之后的机器要修改IP地址，主机名，MAC地址。 redis挂死，导致无法采集 #现象 #redis.clients.jedis.exceptions.JedisDataException: MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. #启动客户端： /usr/local/redis/redis-cli #输入： config set stop-writes-on-bgsave-error no 主节点7180无法访问 1）检查主节点是不是日志空间满了，如果满了，需要删除/var/log/hive下面日志 2）删除浏览器的cookie访问记录 hadoop相关服务启动命令： sudo service cloudera-scm-server stop sudo service cloudera-scm-server-db stop sudo service cloudera-scm-server start sudo service cloudera-scm-server-db start LTEMRO采集报错 主要是在这一步报错：CREATE_EXTERNAL_TABLE_NODE 有效的采样点数据，是如下的八个字段必须有值： MR.LteScEarfcn 主小区频点 MR.LteScPci 主小区PCI MR.LteScRSRP 主小区的RSRP MR.LteScRSRQ 主小区RSRQ MR.LteNcEarfcn 邻小区频点 MR.LteNcPci 邻小区PCI MR.LteNcRSRP 邻小区的RSRP MR.LteNcRSRQ 邻小区RSRQ 只要有有效数据，就不会报这个错。 查看日志 HIVE的日志主要是在:/var/log/hive/ oozie的日志主要在: /var/log/oozie/ HDFS的日志主要在: /var/log/hadoop-hdfs/ zookeeper的日志主要在:/var/log/zookeeper/ 在出现问题的时候，可以看看这些日志。 zookeeper无法启动。 报错如下： 处理办法：到master主机的/var/lib/zookeeper，删除所有的文件，重启zookeeper即可。 sudo mkdir version-2 sudo chown -R zookeeper:zookeeper version-2 loudera-manager-installer.bin安装报错。 报错如下： Loaded plugins: aliases, changelog, downloadonly, fastestmirror, kabi, presto, : refresh-packagekit, security, tmprepo, verify, versionlock Loading support for CentOS kernel ABI Loading mirror speeds from cached hostfile http://10.233.9.63/cdh4.3.0/cdh4.3/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - &quot;The requested URL returned error: 403&quot; Trying other mirror. Error: Cannot retrieve repository metadata (repomd.xml) for repository: cloudera-cdh4. Please verify its path and try again 处理办法： 删除集群中每一台机器上原有的repo文件，rm -rf /etc/yum.repos.d/* 然后修改cloudera-chd4.repo、cloudera-impala.repo和 cloudera-manager.repo文件，将文件中的地址换成主节点的地址。 将cloudera-chd4.repo、cloudera-impala.repo和 cloudera-manager.repo文件上传到集群中每一台机器的/etc/yum.repos.d/目录下。 ","link":"https://mzqk.github.io/post/hadoop-chang-jian-wen-ti/"}]}