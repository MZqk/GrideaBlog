<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<link rel="apple-touch-icon"
  href="https://cdn.jsdelivr.net/gh/chiperman/Blog-photos/./img/iocn/aojep-i6dt9.49j3g5o9xbg.png">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<meta HTTP-EQUIV="expires" CONTENT="0">
<meta name="apple-mobile-web-app-title" content="XiaoX åšå®¢">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<title>Nginxå…¥é—¨ | MZZZ</title>

<link rel="stylesheet" href="https://mzqk.github.io/styles/main.css">
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap"
  rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<!-- ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„iconfont -->
<link href="https://at.alicdn.com/t/font_1651848_9ur7s2zwgll.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://mzqk.github.io/media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
<script>
  wow = new WOW({
    boxClass: 'wow',
    animateClass: 'animated',
    offset: 0,
    mobile: true,
    live: true
  });
  wow.init();
</script>

</head>

<body class="post-template-default single single-post postid-70 single-format-standard">
	<div id="wrapper">
				<header id="header" class="site-header" >
			<div class="site-branding">
				<h1 class="site-title">
					<div class="post-title-name">
						<a href="https://mzqk.github.io" rel="home">Nginxå…¥é—¨</a>
					</div>
				</h1>
				<h2 class="site-description">è¿™ä¸–ç•Œæ€»æœ‰äº›äººåšç€ç¾æ¢¦é€†æ¥é¡ºå—</h2>
			</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
						

						<li>

							<a href="/"> é¦–é¡µ</a></li>

						

						<li>

							<a href="/archives"> å½’æ¡£</a></li>

						

						<li>

							<a href="/post/about"> å…³äº</a></li>

						

					</ul>
					</li>

					</ul>
				</div>
			</nav>

			<div class="jingge">
				
				
				
				
				
				
				<a href="https://github.com/MZqk" target="_blank"><i class="iconfont icon-github"></i></a>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<a href="tencent://message/?uin=961504168&amp;Site=&amp;Menu=yes" target="_blank"><i class="iconfont icon-qq"></i></a>
				
				
				
				<a href="https://weibo.com/532267456?is_all=1" target="_blank"><i class="iconfont icon-weibo"></i></a>
				
				
				
				
			</div>
			<form id="gridea-search-form" data-update="1594086421671" action="/search/index.html">
				<div class="search-box">
					<input class="search-txt" name="q" placeholder="Type to search" />
					<a class="search-btn">
						<i class="iconfont icon-search1" action="/search/index.html"></i>
					</a>
				</div>
			</form>
		</header>
		<div id="content" class="container">
			<div class="row">
				<div class="col-md-8 site-main">
					<article id="post-70"
						class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">
						<div class="entry-content">
							<div class="entry-meta">
								<div class="entry-info">
									<time>
										2019-12-25
									</time>
									<span>
										12 min read
									</span>
									<!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
									<span id="/nginx-ji-chu-ru-men/" class="leancloud_visitors"  data-flag-title="Nginxå…¥é—¨">
										<span class="leancloud-visitors-count"></span>æ¬¡é˜…è¯»
									</span>
									<span class="isTop">
										<script type="text/javascript">
											var isTop;
											isTop = false;
											if (isTop == true) {
												// document.write("<i class="iconfont icon-icon-test"></i>")
												document.write("<span>â­ Top</span>");
											}
										  </script>
									</span>
								</div>
							</div>
							<div class="wow zoomIn entry-summary song">
								<h1 id="nginxå…¥é—¨">Nginxå…¥é—¨</h1>
<h2 id="nginxç®€ä»‹">Nginxç®€ä»‹</h2>
<h3 id="ç®€ä»‹">ç®€ä»‹</h3>
<p>Nginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ï¼Œå…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚</p>
<h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h3>
<ol>
<li>é«˜å¹¶å‘</li>
<li>å†…å­˜æ¶ˆè€—å°‘</li>
<li>æˆæœ¬ä½å»‰</li>
<li>é…ç½®ç®€å•</li>
<li>å†…ç½®å¥åº·æ£€æŸ¥åŠŸèƒ½</li>
<li>èŠ‚çœå¸¦å®½</li>
<li>ç¨³å®šæ€§é«˜</li>
<li>æ”¯æŒçƒ­éƒ¨ç½²</li>
</ol>
<h3 id="å¸¸è§webæœåŠ¡å™¨">å¸¸è§WEBæœåŠ¡å™¨</h3>
<ul>
<li>
<p>Apache</p>
</li>
<li>
<p>Lighttpd</p>
</li>
<li>
<p>Tomcat</p>
</li>
<li>
<p>Tengine</p>
</li>
<li>
<p>IBM WebSphere</p>
</li>
<li>
<p>IIS</p>
</li>
<li>
<p>LVS</p>
</li>
<li>
<p>HAProxy</p>
</li>
</ul>
<h2 id="nginxå®‰è£…">Nginxå®‰è£…</h2>
<h3 id="åœ¨çº¿å®‰è£…">åœ¨çº¿å®‰è£…</h3>
<h4 id="linux">Linux</h4>
<p>apt install nginx</p>
<p>yum install nginx</p>
<p>æŸ¥è¯¢é»˜è®¤é…ç½®æ–‡ä»¶<br>
nginx -t</p>
<h4 id="windows">Windows</h4>
<p>å®˜ç½‘ä¸‹è½½ngixnæ–‡ä»¶è§£å‹è‡³åˆ¶å®šç›®å½•</p>
<h3 id="æºç å®‰è£…">æºç å®‰è£…</h3>
<ol>
<li>ä¸‹è½½æºç åŒ…ï¼ˆåŒ…å«åŸºç¡€ä¾èµ–åŒ…ï¼Œå¦‚prceåº“ï¼‰</li>
<li>./configure æ ¹æ®éœ€æ±‚è¿›è¡Œé…ç½®</li>
<li>make install æŒ‡å®šç›®å½•å®‰è£…</li>
</ol>
<pre><code class="language-shell">wget http://nginx.org/download/nginx-1.16.1.tar.gz
tar -zxvf nginx-1.16.1.tar.gz
./configure
    --sbin-path=/usr/local/nginx/nginx
    --conf-path=/usr/local/nginx/nginx.conf
    --pid-path=/usr/local/nginx/nginx.pid
    --with-http_ssl_module
make &amp;&amp; make install
</code></pre>
<p><a href="http://nginx.org/en/docs/configure.html">å®˜æ–¹ç¼–è¯‘å‚æ•°</a></p>
<h2 id="nginxåŸºç¡€">NginxåŸºç¡€</h2>
<h3 id="åŸºç¡€ä½¿ç”¨">åŸºç¡€ä½¿ç”¨</h3>
<h4 id="å¯åŠ¨">å¯åŠ¨</h4>
<pre><code class="language-shell">nginx #æ­£å¸¸å¯åŠ¨åº”ç”¨
nginx -c /etc/nginx/conf/nginx.conf #æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨ 
</code></pre>
<h4 id="åœæ­¢">åœæ­¢</h4>
<pre><code class="language-shell">nginx -s stop #åœæ­¢nginxåº”ç”¨
pkill -9 nginx #åœæ­¢nginxæ‰€æœ‰è¿›ç¨‹
kill -INT `cat /run/nginx.pid` #æŒ‡å®špidå‘èµ·åœæ­¢ä¿¡å·
</code></pre>
<h4 id="å¹³æ»‘é‡å¯">å¹³æ»‘é‡å¯</h4>
<pre><code class="language-shell">nginx -s reload #é‡å¯åº”ç”¨
kill -HUP `cat /run/nginx.pid` #æŒ‡å®špidå‘èµ·é‡å¯ä¿¡å·
</code></pre>
<h3 id="åŸºç¡€é…ç½®">åŸºç¡€é…ç½®</h3>
<h4 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h4>
<pre><code>/etc/nginx/
â”œâ”€â”€ conf.d
â”œâ”€â”€ default.d
â”œâ”€â”€ fastcgi.conf
â”œâ”€â”€ fastcgi.conf.default
â”œâ”€â”€ fastcgi_params
â”œâ”€â”€ fastcgi_params.default
â”œâ”€â”€ koi-utf
â”œâ”€â”€ koi-win
â”œâ”€â”€ mime.types
â”œâ”€â”€ mime.types.default
â”œâ”€â”€ nginx.conf
â”œâ”€â”€ nginx.conf.default
â”œâ”€â”€ nginx.conf.rpmnew
â”œâ”€â”€ scgi_params
â”œâ”€â”€ scgi_params.default
â”œâ”€â”€ uwsgi_params
â”œâ”€â”€ uwsgi_params.default
â””â”€â”€ win-utf
</code></pre>
<pre><code>/usr/share/nginx/
â”œâ”€â”€ html
â”‚   â”œâ”€â”€ 404.html
â”‚   â”œâ”€â”€ 50x.html
â”‚   â”œâ”€â”€ 50x.html_bak
â”‚   â”œâ”€â”€ en-US -&gt; ../../doc/HTML/en-US
â”‚   â”œâ”€â”€ icons
â”‚   â”‚   â””â”€â”€ poweredby.png -&gt; ../../../pixmaps/poweredby.png
â”‚   â”œâ”€â”€ img -&gt; ../../doc/HTML/img
â”‚   â”œâ”€â”€ index.html -&gt; ../../doc/HTML/index.html
â”‚   â”œâ”€â”€ index.html_bak
â”‚   â”œâ”€â”€ nginx-logo.png
â”‚   â””â”€â”€ poweredby.png -&gt; nginx-logo.png
â””â”€â”€ modules
    â”œâ”€â”€ mod-http-image-filter.conf
    â”œâ”€â”€ mod-http-perl.conf
    â”œâ”€â”€ mod-http-xslt-filter.conf
    â”œâ”€â”€ mod-mail.conf
    â””â”€â”€ mod-stream.conf
</code></pre>
<pre><code>/var/log/nginx/
â”œâ”€â”€ access.log
â””â”€â”€ error.log

/run/nginx.pid 
</code></pre>
<h4 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h4>
<pre><code class="language-shell">#ä¸»é…ç½®
user www www; #ä½¿ç”¨ç”¨æˆ·å’Œç»„
worker_processes auto; #å·¥ä½œè¿›ç¨‹æ•°
error_log /var/log/nginx/error.log; #é”™è¯¯æ—¥å¿—ä¿å­˜ä½ç½®
pid /run/nginx.pid; #è¿›ç¨‹pidå­˜æ”¾ä½ç½®

include /usr/share/nginx/modules/*.conf;  #æ¨¡å—åŠ è½½ç›®å½•
#äº‹ä»¶æ¨¡å‹
events {
    worker_connections 1024; #æœ€å¤§è¿æ¥æ•°
}
#httpæœåŠ¡å™¨
http {
    log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                      '$status $body_bytes_sent &quot;$http_referer&quot; '
                      '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'; #æ—¥å¿—è¾“å‡ºæ ¼å¼

    access_log  /var/log/nginx/access.log  main; #æ ‡å‡†æ—¥å¿—ä¿å­˜ä½ç½®

    sendfile            on; #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œå¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚
    tcp_nopush          on;	#æ­¤é€‰é¡¹å…è®¸æˆ–ç¦æ­¢ä½¿ç”¨sockeçš„TCP_CORKçš„é€‰é¡¹ï¼Œæ­¤é€‰é¡¹ä»…åœ¨ä½¿ç”¨sendfileçš„æ—¶å€™ä½¿ç”¨
    tcp_nodelay         on; #å°†è¿æ¥è½¬å˜ä¸ºé•¿è¿æ¥
    keepalive_timeout   65; #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’
    types_hash_max_size 2048; 

    include             /etc/nginx/mime.types; #è®¾å®šmimeç±»å‹,ç±»å‹ç”±mime.typeæ–‡ä»¶å®šä¹‰
    default_type        application/octet-stream; 

    include /etc/nginx/conf.d/*.conf; #åŠ è½½å…¶ä»–é…ç½®æ–‡ä»¶
    # è™šæ‹Ÿä¸»æœº
    server {
        listen       80 default_server;
        listen       [::]:80 default_server; #ç›‘å¬ç«¯å£
        server_name  _;  #åŸŸåï¼Œå¯ä»¥æœ‰å¤šä¸ª
        root         /usr/share/nginx/html; #webæœåŠ¡å™¨æ ¹ç›®å½•

        include /etc/nginx/default.d/*.conf; #åŠ è½½å…¶ä»–é…ç½®æ–‡ä»¶

        location / {
            proxy_pass        http://127.0.0.1/;
            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for; #è·å–ç”¨æˆ·çœŸå®IP
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
}
</code></pre>
<h3 id="åŸºç¡€ä¼˜åŒ–">åŸºç¡€ä¼˜åŒ–</h3>
<h4 id="æ—¥å¿—æ–‡ä»¶é…ç½®">æ—¥å¿—æ–‡ä»¶é…ç½®</h4>
<pre><code class="language-shell">#!/bin/bash
#è„šæœ¬ç”¨äºåˆ‡å‰²nginxæ—¥å¿—æ–‡ä»¶
#è¯·é…ç½®è„šæœ¬ä¸ºæ¯å¤©00:00å¯åŠ¨
#crontab -e 00 00 * * * /bin/bash /root/spilt_nginx_log.sh

#è®¾ç½®nginxæ—¥å¿—æ–‡ä»¶ç›®å½•
log_path=&quot;/var/log/nginx/&quot;

#æ ¹æ®æ—¶é—´åˆ‡å‰²æ—¥å¿—æ–‡ä»¶
mkdir -p ${log_path}${date -d &quot;yesterday&quot; +&quot;%Y%m&quot;}
mv ${log_path}access.log ${log_path}${date -d &quot;yesterday&quot; +&quot;%Y%m&quot;}/access_${date -d &quot;yesterday&quot; +&quot;%Y%m%d&quot;}.log

#é‡å¯nginx
kill -HUP `cat /run/nginx.pid`
</code></pre>
<h4 id="å‹ç¼©è¾“å‡ºé…ç½®">å‹ç¼©è¾“å‡ºé…ç½®</h4>
<pre><code>gzip on;
gzip_mini_length 1k;
gzip_buffer 4 16k;
gzip_http_version 1.1;
gzip_comp_level 2;
gzip_tesxt_plain application/x-javascript text/css application/xml;
gzip_vary on;
</code></pre>
<h4 id="ç¼“å­˜é…ç½®">ç¼“å­˜é…ç½®</h4>
<pre><code>location ~ .*\.{git|jpg|jpeg|png|bmp|swf}$
{
    expires 30d;
}
location ~ .*\.{js|css}?$
{
    expires 1h;
}
</code></pre>
<h4 id="urlé‡å†™">URLé‡å†™</h4>
<pre><code>#æ ¹æ®æµè§ˆå™¨æ ‡è¯†ï¼Œè®¿é—®èµ„æºé‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶ç›®å½•ï¼ˆä»¥ä¸‹ä¸ºIE)
if ($http_user_agent ~ MSIE ) {
   rewrite ^(.*)$ /msie/$1 break;
}

#å°†ç§»åŠ¨å®¢æˆ·ç«¯çš„è¯·æ±‚é‡å®šå‘åˆ°å…¶ä»–æœåŠ¡å™¨
if    ($http_user_agent ~* '(iphone|ipod)' )  { 
ã€€ã€€ã€€ã€€rewrite ^.+    http://mobile.site.com$uri;
}

#.ç”¨æˆ·ä½¿ç”¨POSTæ–¹å¼è¯·æ±‚æ•°æ®æ—¶å€™ï¼Œè¿”å›405ï¼š
if ($request_method = POST ) {
   return 405;
}

#è®¿é—®xxxxæ—¶é‡å®šå‘åˆ°xxxxç›®å½•
location /xxxx {
     rewrite ^/xxxx/.*$ /xxxx permanent;
}
</code></pre>
<h2 id="nginxå¸¸ç”¨åŠŸèƒ½">Nginxå¸¸ç”¨åŠŸèƒ½</h2>
<h3 id="åå‘ä»£ç†">åå‘ä»£ç†</h3>
<pre><code class="language-shell"> http{
 	server{
        listen       80;
        server_name  localhost;
        location / { 
        proxy_pass http://localhost:8080;     
 	}
 }
</code></pre>
<h3 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h3>
<p><a href="http://nginx.org/en/docs/http/load_balancing.html">å®˜æ–¹è¯´æ˜</a></p>
<pre><code class="language-shell">http {
 upstream myproject {
 server 127.0.0.1:8000 weight=3;
 server 127.0.0.1:8001;
 server 127.0.0.1:8002;
 server 127.0.0.1:8003;
 }
 	server {
 	listen 80;
	 server_name www.domain.com;
 	location / {
 		proxy_pass http://myproject;
 		}
 	}
}
</code></pre>
<h3 id="æ­£å‘ä»£ç†">æ­£å‘ä»£ç†</h3>
<pre><code class="language-shell">http{
    server{
        listen 8888;
        location / {
            resolver 8.8.8.8;
            proxy_pass	http://$http_host$request_uri;
        }
    }
}
</code></pre>
<h3 id="httpæœåŠ¡å™¨ssl">HTTPæœåŠ¡å™¨ï¼ˆSSLï¼‰</h3>
<p><a href="http://nginx.org/en/docs/http/configuring_https_servers.html">å®˜æ–¹è¯´æ˜</a></p>
<pre><code class="language-shell">http {
  server {
    listen	443;
    server_name	localhost;
    ssl	on;
    ssl_certificate      /usr/local/nginx/conf/cert.pem;
    ssl_certificate_key  /usr/local/nginx/conf/cert.key;
  }
}
</code></pre>
<h3 id="æ–‡ä»¶æœåŠ¡å™¨">æ–‡ä»¶æœåŠ¡å™¨</h3>
<pre><code class="language-shell">http{
    server{
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html/;
    }
}
</code></pre>
<h3 id="ç¼“å­˜æœåŠ¡å™¨">ç¼“å­˜æœåŠ¡å™¨</h3>
<pre><code>http{
	upstream myproject {
        server 192.168.1.112:8001;
        server 192.168.1.112:8002;
        server 192.168.1.112:8003;
    	}

	proxy_buffering on;
	proxy_cache_valid any 10m;
	proxy_cache_path /data/cache levels=1:2 keys_zone=my_cache:10m max_size=1000m inactive=600m;
	proxy_temp_path /data/temp;
	proxy_buffer_size 4k;
	proxy_buffers 100 8k;

	server {
    	listen       80;
    	server_name  localhost jeson.t.imooc.io; 
    	location / {
        	proxy_cache my_cache;  #å¼€å¯ç¼“å­˜
       		proxy_pass http://myproject;
            proxy_cache_key $host$uri$is_args$args; #å®šä¹‰ç¼“å­˜çš„key
    }
}
</code></pre>
<h2 id="nginxæ¨¡å—">Nginxæ¨¡å—</h2>
<h3 id="httpæ¨¡å—">HTTPæ¨¡å—</h3>
<ul>
<li><a href="http://nginx.org/en/docs/http/ngx_http_core_module.html">ngx_http_core_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_access_module.html">ngx_http_access_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_addition_module.html">ngx_http_addition_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_api_module.html">ngx_http_api_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html">ngx_http_auth_jwt_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_auth_request_module.html">ngx_http_auth_request_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_autoindex_module.html">ngx_http_autoindex_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_browser_module.html">ngx_http_browser_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_charset_module.html">ngx_http_charset_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_dav_module.html">ngx_http_dav_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_empty_gif_module.html">ngx_http_empty_gif_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_f4f_module.html">ngx_http_f4f_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html">ngx_http_fastcgi_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_flv_module.html">ngx_http_flv_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_geo_module.html">ngx_http_geo_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_geoip_module.html">ngx_http_geoip_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_grpc_module.html">ngx_http_grpc_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_gunzip_module.html">ngx_http_gunzip_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html">ngx_http_gzip_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_gzip_static_module.html">ngx_http_gzip_static_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_headers_module.html">ngx_http_headers_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_hls_module.html">ngx_http_hls_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_image_filter_module.html">ngx_http_image_filter_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_index_module.html">ngx_http_index_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_js_module.html">ngx_http_js_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_keyval_module.html">ngx_http_keyval_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html">ngx_http_limit_conn_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_limit_req_module.html">ngx_http_limit_req_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_log_module.html">ngx_http_log_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_map_module.html">ngx_http_map_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_memcached_module.html">ngx_http_memcached_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_mirror_module.html">ngx_http_mirror_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_mp4_module.html">ngx_http_mp4_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_perl_module.html">ngx_http_perl_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html">ngx_http_proxy_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_random_index_module.html">ngx_http_random_index_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_realip_module.html">ngx_http_realip_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_referer_module.html">ngx_http_referer_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html">ngx_http_rewrite_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_scgi_module.html">ngx_http_scgi_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_secure_link_module.html">ngx_http_secure_link_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_session_log_module.html">ngx_http_session_log_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_slice_module.html">ngx_http_slice_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">ngx_http_spdy_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_split_clients_module.html">ngx_http_split_clients_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_ssi_module.html">ngx_http_ssi_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html">ngx_http_ssl_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_status_module.html">ngx_http_status_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_stub_status_module.html">ngx_http_stub_status_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_sub_module.html">ngx_http_sub_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html">ngx_http_upstream_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_upstream_conf_module.html">ngx_http_upstream_conf_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_upstream_hc_module.html">ngx_http_upstream_hc_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_userid_module.html">ngx_http_userid_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html">ngx_http_uwsgi_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_v2_module.html">ngx_http_v2_module</a></li>
<li><a href="http://nginx.org/en/docs/http/ngx_http_xslt_module.html">ngx_http_xslt_module</a></li>
</ul>
<h3 id="é‚®ç®±æ¨¡å—">é‚®ç®±æ¨¡å—</h3>
<ul>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_core_module.html">ngx_mail_core_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_auth_http_module.html">ngx_mail_auth_http_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_proxy_module.html">ngx_mail_proxy_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_ssl_module.html">ngx_mail_ssl_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_imap_module.html">ngx_mail_imap_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_pop3_module.html">ngx_mail_pop3_module</a></li>
<li><a href="http://nginx.org/en/docs/mail/ngx_mail_smtp_module.html">ngx_mail_smtp_module</a></li>
</ul>
<h3 id="streanæ¨¡å—">Streanæ¨¡å—</h3>
<ul>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_core_module.html">ngx_stream_core_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_access_module.html">ngx_stream_access_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_geo_module.html">ngx_stream_geo_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_geoip_module.html">ngx_stream_geoip_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_js_module.html">ngx_stream_js_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_keyval_module.html">ngx_stream_keyval_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_limit_conn_module.html">ngx_stream_limit_conn_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_log_module.html">ngx_stream_log_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_map_module.html">ngx_stream_map_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_proxy_module.html">ngx_stream_proxy_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_realip_module.html">ngx_stream_realip_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_return_module.html">ngx_stream_return_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_split_clients_module.html">ngx_stream_split_clients_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_ssl_module.html">ngx_stream_ssl_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_ssl_preread_module.html">ngx_stream_ssl_preread_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_upstream_module.html">ngx_stream_upstream_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_upstream_hc_module.html">ngx_stream_upstream_hc_module</a></li>
<li><a href="http://nginx.org/en/docs/stream/ngx_stream_zone_sync_module.html">ngx_stream_zone_sync_module</a></li>
</ul>
<h2 id="slbå®ä¾‹">SLBå®ä¾‹</h2>
<h3 id="äº§å“æ¶æ„">äº§å“æ¶æ„</h3>
<h4 id="åŸºç¡€æ¶æ„è¯´æ˜">åŸºç¡€æ¶æ„è¯´æ˜</h4>
<p>é˜¿é‡Œäº‘å½“å‰æä¾›å››å±‚å’Œä¸ƒå±‚çš„è´Ÿè½½å‡è¡¡æœåŠ¡ã€‚</p>
<ul>
<li>å››å±‚é‡‡ç”¨å¼€æºè½¯ä»¶LVSï¼ˆLinux Virtual Serverï¼‰+ keepalivedçš„æ–¹å¼å®ç°è´Ÿè½½å‡è¡¡ï¼Œå¹¶æ ¹æ®äº‘è®¡ç®—éœ€æ±‚å¯¹å…¶è¿›è¡Œäº†ä¸ªæ€§åŒ–å®šåˆ¶ã€‚</li>
<li>ä¸ƒå±‚é‡‡ç”¨Tengineå®ç°è´Ÿè½½å‡è¡¡ã€‚Tengineæ˜¯ç”±æ·˜å®ç½‘å‘èµ·çš„WebæœåŠ¡å™¨é¡¹ç›®ï¼Œå®ƒåœ¨Nginxçš„åŸºç¡€ä¸Šï¼Œé’ˆå¯¹æœ‰å¤§è®¿é—®é‡çš„ç½‘ç«™éœ€æ±‚ï¼Œæ·»åŠ äº†å¾ˆå¤šé«˜çº§åŠŸèƒ½å’Œç‰¹æ€§ã€‚<br>
<a href="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4092/1566871290938_zh-CN.png"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4092/1566871290938_zh-CN.png" alt="Tengine" loading="lazy"></a></li>
</ul>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå„ä¸ªåœ°åŸŸçš„å››å±‚è´Ÿè½½å‡è¡¡å®é™…ä¸Šæ˜¯ç”±å¤šå°LVSæœºå™¨éƒ¨ç½²æˆä¸€ä¸ªLVSé›†ç¾¤æ¥è¿è¡Œçš„ã€‚é‡‡ç”¨é›†ç¾¤éƒ¨ç½²æ¨¡å¼æå¤§åœ°ä¿è¯äº†å¼‚å¸¸æƒ…å†µä¸‹è´Ÿè½½å‡è¡¡æœåŠ¡çš„å¯ç”¨æ€§ã€ç¨³å®šæ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<figure data-type="image" tabindex="1"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4092/1566871290939_zh-CN.png" alt="LVS" loading="lazy"></figure>
<p>LVSé›†ç¾¤å†…çš„æ¯å°LVSéƒ½ä¼šè¿›è¡Œä¼šè¯ï¼Œé€šè¿‡ç»„æ’­æŠ¥æ–‡åŒæ­¥åˆ°è¯¥é›†ç¾¤å†…çš„å…¶å®ƒLVSæœºå™¨ä¸Šï¼Œä»è€Œå®ç°LVSé›†ç¾¤å†…å„å°æœºå™¨é—´çš„ä¼šè¯åŒæ­¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ä¼ è¾“ä¸‰ä¸ªæ•°æ®åŒ…åï¼Œåœ¨LVS1ä¸Šå»ºç«‹çš„ä¼šè¯Aå¼€å§‹åŒæ­¥åˆ°å…¶å®ƒLVSæœºå™¨ä¸Šã€‚å›¾ä¸­å®çº¿è¡¨ç¤ºç°æœ‰çš„è¿æ¥ï¼Œå›¾ä¸­è™šçº¿è¡¨ç¤ºå½“LVS1å‡ºç°æ•…éšœæˆ–è¿›è¡Œç»´æŠ¤æ—¶ï¼Œè¿™éƒ¨åˆ†æµé‡ä¼šèµ°åˆ°ä¸€å°å¯ä»¥æ­£å¸¸è¿è¡Œçš„æœºå™¨LVS2ä¸Šã€‚å› è€Œè´Ÿè½½å‡è¡¡é›†ç¾¤æ”¯æŒçƒ­å‡çº§ï¼Œå¹¶ä¸”åœ¨æœºå™¨æ•…éšœå’Œé›†ç¾¤ç»´æŠ¤æ—¶æœ€å¤§ç¨‹åº¦å¯¹ç”¨æˆ·é€æ˜ï¼Œä¸å½±å“ç”¨æˆ·ä¸šåŠ¡ã€‚</p>
<p><strong>è¯´æ˜</strong> å¯¹äºè¿æ¥æœªå»ºç«‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹æœªå®Œæˆï¼‰ï¼Œæˆ–è€…å·²å»ºç«‹è¿æ¥ä½†æœªè§¦å‘ä¼šè¯åŒæ­¥æœºåˆ¶ï¼Œçƒ­å‡çº§ä¸ä¿è¯è¿æ¥ä¸ä¸­æ–­ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯é‡æ–°å‘èµ·è¿æ¥ã€‚</p>
<figure data-type="image" tabindex="2"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4092/1566871290941_zh-CN.png" alt="LVS" loading="lazy"></figure>
<h4 id="å…¥ç½‘æµé‡è·¯å¾„">å…¥ç½‘æµé‡è·¯å¾„</h4>
<p>å¯¹äºå…¥ç½‘æµé‡ï¼Œè´Ÿè½½å‡è¡¡ä¼šæ ¹æ®ç”¨æˆ·åœ¨æ§åˆ¶å°æˆ–APIä¸Šé…ç½®çš„è½¬å‘ç­–ç•¥ï¼Œå¯¹æ¥è‡ªå‰ç«¯çš„è®¿é—®è¯·æ±‚è¿›è¡Œè½¬å‘å’Œå¤„ç†ï¼Œæ•°æ®æµè½¬å¦‚<a href="https://help.aliyun.com/document_detail/27544.html?spm=a2c4g.11186623.6.546.3bdf54931Vjryc#d7e30">å›¾ 1</a>æ‰€ç¤ºã€‚</p>
<p>å›¾ 1. å…¥ç½‘æµé‡è·¯å¾„<br>
<a href="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4114/15668712912333_zh-CN.png"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4114/15668712912333_zh-CN.png" alt="img" loading="lazy"></a></p>
<ol>
<li>TCP/UDPåè®®å’ŒHTTP/HTTPSåè®®çš„æµé‡éƒ½éœ€è¦ç»è¿‡LVSé›†ç¾¤è¿›è¡Œè½¬å‘ã€‚</li>
<li>LVSé›†ç¾¤å†…çš„æ¯ä¸€å°èŠ‚ç‚¹æœåŠ¡å™¨å‡åŒ€åœ°åˆ†é…æµ·é‡è®¿é—®è¯·æ±‚ï¼Œå¹¶ä¸”æ¯ä¸€å°èŠ‚ç‚¹æœåŠ¡å™¨ä¹‹é—´éƒ½æœ‰ä¼šè¯åŒæ­¥ç­–ç•¥ï¼Œä»¥ä¿è¯é«˜å¯ç”¨ã€‚
<ul>
<li>å¦‚æœç›¸åº”çš„è´Ÿè½½å‡è¡¡å®ä¾‹æœåŠ¡ç«¯å£ä½¿ç”¨çš„æ˜¯å››å±‚åè®®ï¼ˆTCPæˆ–UDPï¼‰ï¼Œé‚£ä¹ˆLVSé›†ç¾¤å†…æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæ ¹æ®è´Ÿè½½å‡è¡¡å®ä¾‹è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå°†å…¶æ‰¿è½½çš„æœåŠ¡è¯·æ±‚æŒ‰ç­–ç•¥ç›´æ¥åˆ†å‘åˆ°åç«¯ECSæœåŠ¡å™¨ã€‚</li>
<li>å¦‚æœç›¸åº”çš„è´Ÿè½½å‡è¡¡å®ä¾‹æœåŠ¡ç«¯å£ä½¿ç”¨çš„æ˜¯ä¸ƒå±‚HTTPåè®®ï¼Œé‚£ä¹ˆLVSé›†ç¾¤å†…æ¯ä¸ªèŠ‚ç‚¹ä¼šå…ˆå°†å…¶æ‰¿è½½çš„æœåŠ¡è¯·æ±‚å‡åˆ†åˆ°Tengineé›†ç¾¤ï¼ŒTengineé›†ç¾¤å†…çš„æ¯ä¸ªèŠ‚ç‚¹å†æ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå°†æœåŠ¡è¯·æ±‚æŒ‰ç­–ç•¥æœ€ç»ˆåˆ†å‘åˆ°åç«¯ECSæœåŠ¡å™¨ã€‚</li>
<li>å¦‚æœç›¸åº”çš„è´Ÿè½½å‡è¡¡å®ä¾‹æœåŠ¡ç«¯å£ä½¿ç”¨çš„æ˜¯ä¸ƒå±‚HTTPSåè®®ï¼Œä¸ä¸Šè¿°HTTPå¤„ç†è¿‡ç¨‹ç±»ä¼¼ï¼Œå·®åˆ«æ˜¯åœ¨æŒ‰ç­–ç•¥å°†æœåŠ¡è¯·æ±‚æœ€ç»ˆåˆ†å‘åˆ°åç«¯ECSæœåŠ¡å™¨å‰ï¼Œå…ˆè°ƒç”¨Key Serverè¿›è¡Œè¯ä¹¦éªŒè¯åŠæ•°æ®åŒ…åŠ è§£å¯†ç­‰å‰ç½®æ“ä½œã€‚</li>
</ul>
</li>
</ol>
<h4 id="å‡ºç½‘æµé‡è·¯å¾„">å‡ºç½‘æµé‡è·¯å¾„</h4>
<p>è´Ÿè½½å‡è¡¡SLBå’Œåç«¯ECSä¹‹é—´æ˜¯é€šè¿‡å†…ç½‘è¿›è¡Œé€šä¿¡çš„ã€‚</p>
<ul>
<li>
<p>å¦‚æœECSä»…ä»…å¤„ç†æ¥è‡ªè´Ÿè½½å‡è¡¡çš„è¯·æ±‚ï¼Œå¯ä»¥ä¸è´­ä¹°å…¬ç½‘å¸¦å®½ï¼ˆECSå…¬ç½‘IP/å¼¹æ€§å…¬ç½‘IP/NATç½‘å…³ç­‰ï¼‰ã€‚</p>
<p><strong>è¯´æ˜</strong> æ—©æœŸåˆ›å»ºçš„ä¸€äº›ECSä¸Šç›´æ¥åˆ†é…äº†å…¬ç½‘IPï¼ˆifconfigä¸­å¯è§æ¥å£ä¸Šåˆ†é…çš„å…¬ç½‘ipåœ°å€ï¼‰ï¼Œæ­¤ç±»ECSå¦‚æœä»…é€šè¿‡SLBå¯¹å¤–æä¾›æœåŠ¡ï¼Œå³ä¾¿åœ¨å…¬ç½‘æ¥å£ï¼ˆç½‘å¡ï¼‰ä¸Šçœ‹åˆ°æœ‰æµé‡ç»Ÿè®¡ï¼Œä¹Ÿä¸ä¼šäº§ç”ŸECSçš„å…¬ç½‘è´¹ç”¨ã€‚</p>
</li>
<li>
<p>å¦‚æœéœ€è¦ç›´æ¥é€šè¿‡åç«¯ECSå¯¹å¤–æä¾›æœåŠ¡ï¼Œæˆ–åç«¯ECSæœ‰è®¿é—®å¤–ç½‘çš„éœ€æ±‚ï¼Œ é‚£ä¹ˆéœ€è¦ç›¸åº”çš„é…ç½®æˆ–è´­ä¹°ECSå…¬ç½‘IP/å¼¹æ€§å…¬ç½‘IP/NATç½‘å…³ç­‰æœåŠ¡ã€‚</p>
</li>
</ul>
<p>ECSçš„å…¬ç½‘æµé‡è®¿é—®è·¯å¾„å¦‚<a href="https://help.aliyun.com/document_detail/27544.html?spm=a2c4g.11186623.6.546.3bdf54931Vjryc#d7e90">å›¾ 2</a>æ‰€ç¤ºã€‚</p>
<p>å›¾ 2. å‡ºç½‘æµé‡è·¯å¾„<br>
<a href="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4114/15668712912335_zh-CN.png"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/4114/15668712912335_zh-CN.png" alt="img" loading="lazy"></a></p>
<p>æ€»ä½“åŸåˆ™ï¼šæµé‡ä»å“ªé‡Œè¿›æ¥ï¼Œå°±ä»å“ªé‡Œå‡ºå»ã€‚</p>
<ol>
<li>é€šè¿‡è´Ÿè½½å‡è¡¡è¿›å…¥çš„æµé‡åœ¨è´Ÿè½½å‡è¡¡SLBä¸Šé™é€Ÿ/è®¡è´¹ï¼Œä»…æ”¶å–å‡ºæ–¹å‘æµé‡è´¹ç”¨ï¼Œå…¥æ–¹å‘æµé‡ä¸æ”¶å–ï¼ˆåœ¨æœªæ¥å¯èƒ½ä¼šæ”¹å˜ï¼‰ï¼ŒSLBåˆ°ECSä¹‹é—´æ˜¯é˜¿é‡Œäº‘å†…ç½‘é€šä¿¡ï¼Œä¸æ”¶å–æµé‡è´¹ç”¨ã€‚</li>
<li>æ¥è‡ªå¼¹æ€§å…¬ç½‘IP/NATç½‘å…³çš„æµé‡ï¼Œåˆ†åˆ«åœ¨å¼¹æ€§å…¬ç½‘IP/NATç½‘å…³ä¸Šè¿›è¡Œé™é€Ÿ/è®¡è´¹ï¼Œå¦‚æœåœ¨è´­ä¹°ECSæ—¶é€‰æ‹©äº†å…¬ç½‘å¸¦å®½ï¼Œé™é€Ÿ/è®¡è´¹ç‚¹åœ¨ECSä¸Šã€‚</li>
<li>è´Ÿè½½å‡è¡¡SLBä»…æä¾›è¢«åŠ¨è®¿é—®å…¬ç½‘çš„èƒ½åŠ›ï¼Œå³åç«¯ECSåªèƒ½åœ¨æ”¶åˆ°é€šè¿‡è´Ÿè½½å‡è¡¡SLBè½¬å‘æ¥çš„å…¬ç½‘çš„è¯·æ±‚æ—¶ï¼Œæ‰èƒ½è®¿é—®å…¬ç½‘å›åº”è¯¥è¯·æ±‚ï¼Œå¦‚åç«¯ECSå¸Œæœ›ä¸»åŠ¨å‘èµ·å…¬ç½‘è®¿é—®ï¼Œåˆ™éœ€è¦é…ç½®/è´­ä¹°ECSå…¬ç½‘å¸¦å®½ã€å¼¹æ€§å…¬ç½‘IPæˆ–NATç½‘å…³æ¥å®ç°ã€‚</li>
<li>ECSå…¬ç½‘å¸¦å®½ï¼ˆè´­ä¹°ECSæ—¶é…ç½®ï¼‰ã€å¼¹æ€§å…¬ç½‘IPã€NATç½‘å…³å‡å¯ä»¥å®ç°ECSçš„åŒå‘å…¬ç½‘è®¿é—®ï¼ˆè®¿é—®æˆ–è¢«è®¿é—®ï¼‰ï¼Œä½†æ²¡æœ‰æµé‡åˆ†å‘å’Œè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ã€‚</li>
</ol>
<h3 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h3>
<video id="video" controls="" preload="none" poster="">
 <source id="mp4" src="https://cloud.video.taobao.com/play/u/3171458687/p/1/e/6/t/1/50265550292.mp4" type="video/mp4">
</video>
<p>â€‹</p>

							</div>
							<div class="wow zoomIn vt-post-tags">
								
								<a href="https://mzqk.github.io/tag/j2Ca_XOy9/" rel="tag">æ•™ç¨‹</a>
								
							</div>
							<nav class="navigation3 post-navigation3" role="navigation">

								<div class="nav-links3">
									
									<div class="wow zoomIn nav-previous3"><a href="https://mzqk.github.io/post/oracle-an-zhuang/"
											rel="prev"> Oracle å®‰è£…</a></div>
									
									
									<div class="wow zoomIn nav-next3"><a href="https://mzqk.github.io/post/kubeadm-an-zhuang-k8s/"
											rel="next"> kubeadmå®‰è£…k8s</a></div>
									
								</div>
							</nav>
							<div class="wow zoomIn author-info" style="visibility: visible; animation-name: zoomIn;">
								<div class="author-avatar pull-left"><img
										src="https://mzqk.github.io/images/avatar.png"></div>
								
								<div class="author-description">
									<div class="author-title">
										<div class="author-link" rel="author">MZZZ</div>
									</div>
									
									
						</div>
					</article>
					<div id="marlin_lite_about_widget-2" class="wow zoomIn widget marlin_lite_about_widget"
						data-wow-delay="0.1s">

						
						<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://mzqk.github.io/media/scripts/Valine.min.js'></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->



<div class="comment"></div>
<script>
        new Valine({
            // AV å¯¹è±¡æ¥è‡ªä¸Šé¢å¼•å…¥av-min.js(è€å¸æœºä»¬ä¸è¦å¼€è½¦â³â™¡ã‚›æ‰å¿ƒäº†è€é“)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            visitor: true,
            
            
            emoticon_list: ["å.png","å–·è¡€.png","ç‹‚æ±—.png","ä¸è¯´è¯.png","æ±—.png","åç­‰.png","çŒ®èŠ±.png","ä¸é«˜å…´.png","ä¸­åˆ€.png","å®³ç¾.png","çš±çœ‰.png","å°çœ¼ç›.png","ä¸­æŒ‡.png","å°´å°¬.png","ç…ä½ .png","æƒ³ä¸€æƒ³.png","ä¸­æª.png","å¾—æ„.png","è‚¿åŒ….png","æ‰‡è€³å…‰.png","äº²äº².png","æƒŠå–œ.png","è„¸çº¢.png","æ— æ‰€è°“.png","ä¾¿ä¾¿.png","æ„¤æ€’.png","èœ¡çƒ›.png","çŒ®é»„ç“œ.png","å†…ä¼¤.png","æŠ•é™.png","è§‚å¯Ÿ.png","çœ‹ä¸è§.png","å‡»æŒ.png","æŠ é¼».png","é‚ªæ¶.png","çœ‹çƒ­é—¹.png","å£æ°´.png","æŠ½çƒŸ.png","é”çœ‰.png","è£…å¤§æ¬¾.png","åèˆŒ.png","æ— å¥ˆ.png","é•¿è‰.png","èµä¸€ä¸ª.png","å‘²ç‰™.png","æ— è¯­.png","é˜´æš—.png","ä¸å‡ºæ‰€æ–™.png","å’½æ°”.png","æœŸå¾….png","é«˜å…´.png","åè¡€å€’åœ°.png","å“­æ³£.png","æ¬¢å‘¼.png","é»‘çº¿.png","å–œæè€Œæ³£.png","å–·æ°´.png","æ·±æ€.png","é¼“æŒ.png","æš—åœ°è§‚å¯Ÿ.png"],
            	
            	
            
        });
    </script> 


					</div>
				</div>
				<div class="tocc col l3 hide-on-med-and-down">

    <div class="toc-widget">

        <div class="toc-title"></div>

        <div id="toc-content">


        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });

    $(function () {
        var bt;
        bt = $('.toc-widget');
        if ($(document).width() > 480) {
            $(window).scroll(function () {
                var st;
                st = $(window).scrollTop();
                if (st > 450) {
                    return bt.css('display', 'block');
                } else {
                    return bt.css('display', 'none');
                }
            })
        }
    });
</script>
			</div>
		</div>
		<footer id="colophon" class="site-footer">
	<div class="container">
		<div class="copyright">
			
			<b>Crafted with ğŸ’” by <a href="https://chiperman.github.io/about/" target="_blank">chiperman</a></b>
			<br>
			<b>Eleven forever.</b>
			<br>
			<span class="runtime">
				ã€Œæˆ‘ã€å·²ç»è¿è¡Œäº†<script type="text/javascript">
					var urodz = new Date("05/07/2018");
					var now = new Date();
					var ile = now.getTime() - urodz.getTime();
					var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
					document.write(+dni)
				</script>å¤©
				<br>
			</span>
			<b>Theme: </b>
			<a href="https://github.com/chiperman/gridea-theme-xiaox" target="_blank" title="Pan">
				<span><b>Pan - XiaoX</b></span>
			</a>
			<b>. Powered by </b>
			<a href="https://gridea.dev/" target="_blank" title="Gridea">
				<span><b>Gridea</b></span>
			</a>
		</div>
	</div><!-- .container -->
</footer><!-- #colophon -->
	</div>

	<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>

<script
  src="https://cdn.jsdelivr.net/gh/MZqk/mzqk.github.io/media/scripts/marlin-scripts.js">
</script>

<script src="//tokinx.github.io/lately/lately.min.js"></script>
<script>
  jQuery(document).ready(function () {
    $.lately({
      'target': '.lately-a,.lately-b,.lately-c'
    })
  });
</script>
<style type="text/css">
  /* ä¸€é”®åˆ°é¡¶éƒ¨ */
  a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 65px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.back_to_top span {
    color: #888;
  }

  a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.back_to_top:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .back_to_top {
      display: none !important;
    }
  }

  /* ä¸€é”®åˆ°åº•éƒ¨ */

  a.down_to_bottom {
    text-decoration: none;
    position: fixed;
    bottom: 15px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.down_to_bottom span {
    color: #888;
  }

  a.down_to_bottom:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.down_to_bottom:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .down_to_bottom {
      display: none !important;
    }
  }
</style>


<a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>

<a id="down_to_bottom" href="#" class="down_to_bottom"><span><i class="iconfont icon-xiangxia"></i></span>
</a>

<script src="//instant.page/3.0.0" type="module" defer
  integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>

<script>
  function getScrollTop() {
    var scrollTop = 0,
      bodyScrollTop = 0,
      documentScrollTop = 0;
    if (document.body) {
      bodyScrollTop = document.body.scrollTop;
    }
    if (document.documentElement) {
      documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
  };

  function getScrollHeight() {
    var scrollHeight = 0,
      bodyScrollHeight = 0,
      documentScrollHeight = 0;
    if (document.body) {
      bSH = document.body.scrollHeight;
    }
    if (document.documentElement) {
      dSH = document.documentElement.scrollHeight;
    }
    scrollHeight = (bSH - dSH > 0) ? bSH : dSH;
    return scrollHeight;
  };

  function getWindowHeight() {
    var windowHeight = 0;
    if (document.compatMode == "CSS1Compat") {
      windowHeight = document.documentElement.clientHeight;
    } else {
      windowHeight = document.body.clientHeight;
    }
    return windowHeight;
  };

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block');
          } else {
            return bt.css('display', 'none');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: 0
          }, 800);
          return false;
        });
      }
    };
  })(this));

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#down_to_bottom');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (getScrollTop() + getWindowHeight() == getScrollHeight()) {
            return bt.css('display', 'none');
          } else {
            return bt.css('display', 'block');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: $('body,html')[0].scrollHeight
          }, 800);
          return false;
        });
      }
    };
  })(this));
</script>
	<script data-no-instant>
		(function ($) {
			$.extend({
				adamsOverload: function () {
					$('.navigation:eq(0)').remove();
					$("").attr("rel", "external");
					$("a[rel='external'],a[rel='external nofollow']").attr("target", "_blank");
					$("a.vi").attr("rel", "");
					$.viewImage({
						'target': 'img',
						'exclude': '.vsmile-icons img,.gallery img',
						'delay': 300
					});
					$.lately({
						'target': '.commentmetadata a,.infos time,.post-list time'
					});
					prettyPrint();

					$('ul.links li a').each(function () {
						if ($(this).parent().find('.bg').length == 0) {
							$(this).parent().append(
								'<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain=' +
								$(this).attr("href") + ')"></div>--->')
						}
					});
				}
			});
		})(jQuery);
		jQuery.adamsOverload();
	</script>

</body>

</html>