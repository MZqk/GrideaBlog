<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
<title>Oracle 安装 - MZZZ</title>
<meta name="description" content="温故而知新">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link type='text/css' rel='stylesheet' href='https://mzqk.github.io/styles/main.css' media='screen' />
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css">
<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">

<script type="text/javascript" src='https://mzqk.github.io/media/scripts/jquery.js'></script>
<script type="text/javascript" src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>
</head>

<body>
  <div class="layout theme-dark">
    <div class="layout-header">

	<div class="layout-header-main">
		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">

					<div class="navbar">

						<div class="logo">
							<a href="https://mzqk.github.io">
								<img class="logo"
									src="https://mzqk.github.io/media/images/site_avatar.png?v=1591082906244"
									alt="">
							</a>
						</div>

						<div class="menu d-md-inline-block d-none">
							<ul class="layout-navigation-list">
								
								<li class="layout-navigation-item"><a title="首页"
										href="/">首页</a>
								</li>
								
								<li class="layout-navigation-item"><a title="归档"
										href="/archives">归档</a>
								</li>
								
								<li class="layout-navigation-item"><a title="标签"
										href="/tags">标签</a>
								</li>
								
								<li class="layout-navigation-item"><a title="关于"
										href="/post/about">关于</a>
								</li>
								
							</ul>
						</div>

						<div class="item d-md-inline-block d-none">
							<div class="search-icon">
								<i class="fa fa-search" aria-hidden="true"></i>
							</div>
						</div>



						<div class="d-md-inline-block d-none">
							<div class="search-lightbox">
								<div class="search-body">

									<form id="gridea-search-form" data-update="1591082906244" action="/search/" class="search-form">
										<input type="text" name="q" id="s" value="" class="search-field" placeholder="请输入搜索关键词" aria-label="请输入搜索关键词" required="">
										<button type="submit" class="submit" aria-label="Submit">
											<i class="fa fa-search" aria-hidden="true"></i>
										</button>
									</form>

								</div>
							</div>
						</div>

						<div class="nav d-md-none d-inline-block">
							<div class="trigger">
								<i class="fa fa-bars layout-btn-toggle" aria-hidden="true"></i>
							</div>
						</div>

					</div>

				</div>
			</div>




		</div>
	</div>

</div>
    <div class="layout-collapse d-md-none">
	<div class="layout-collapse-main">
		<ul class="layout-collapse-list">
			
			<li class="layout-collapse-item"><a title="首页" href="/">首页</a></li>
			
			<li class="layout-collapse-item"><a title="归档" href="/archives">归档</a></li>
			
			<li class="layout-collapse-item"><a title="标签" href="/tags">标签</a></li>
			
			<li class="layout-collapse-item"><a title="关于" href="/post/about">关于</a></li>
			

		</ul>
	</div>
</div>

    <div class="layout-content">
      <div class="layout-content-main">
        <div class="container">
          <div class="row justify-content-lg-center">
            <div class="col-12 col-lg-9">
              <div class="layout-post">
                <div class="layout-post-body">
                  <div class="row">

                    <div class="col-12 col-lg-10">
                      <div class="layout-post-main m-right m-md-right">
                        <div class="layout-post-header">
                          <h1 class="layout-post-title">Oracle 安装</h1>
                          <div class="layout-post-meta">
                            <div class="item">
                               <a href="https://mzqk.github.io/tag/j2Ca_XOy9/" class="post--keyword"
                                data-title="教程" data-type="post_tag" data-term-id="39">教程</a>
                              
                            </div>
                            <div class="item">
                              <span>2020-06-02</span>
                            </div>
                          </div>
                        </div>
                        <div class="layout-post-content">
                          <div class="layout-post-item">
                            
                            <h1 id="linux-安装-oracle软件">Linux 安装 Oracle软件</h1>
<h2 id="环境准备">环境准备</h2>
<h3 id="创建用户和用户组">创建用户和用户组</h3>
<pre><code class="language-bash">groupadd oinstall
groupadd dba
useradd -g oinstall -G dba oracle
passwd oracle
</code></pre>
<h3 id="安装依赖">安装依赖</h3>
<pre><code class="language-bash">yum install gcc make binutils gcc-c++ \
compat-libstdc++-33elfutils-libelf-devel \
elfutils-libelf-devel-static ksh libaio \
libaio-develnumactl-devel sysstat unixODBC \
unixODBC-devel pcre-devel –y
</code></pre>
<h3 id="内核参数调整">内核参数调整</h3>
<ol>
<li>关闭selinux</li>
</ol>
<blockquote>
<p>/etc/selinux/config</p>
</blockquote>
<pre><code class="language-bash"># 修改配置文件参数 SELINUX=disabled
setenforce 0
</code></pre>
<ol start="2">
<li>修改系统参数</li>
</ol>
<blockquote>
<p>/etc/sysctl.conf</p>
</blockquote>
<pre><code class="language-vim">fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = 2097152
kernel.shmmax = 1073741824 #kernel.shmmax 为本机物理内存的一半，单位为byte。
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576 
</code></pre>
<pre><code class="language-bash">sysctl -p
</code></pre>
<ol start="3">
<li>修改用户限制</li>
</ol>
<blockquote>
<p>/etc/security/limits.conf</p>
</blockquote>
<pre><code class="language-bash"># 末尾添加
oracle           soft    nproc           2047
oracle           hard    nproc           16384
oracle           soft    nofile          1024
oracle           hard    nofile         65536
oracle           soft    stack           10240 
</code></pre>
<blockquote>
<p>/etc/pam.d/login</p>
</blockquote>
<pre><code class="language-bash"># 末尾添加
session required  /lib64/security/pam_limits.so
session required   pam_limits.so 
</code></pre>
<blockquote>
<p>/etc/profile</p>
</blockquote>
<pre><code class="language-bash"># 末尾添加
if [ $USER = &quot;oracle&quot; ]; then
  if [ $SHELL = &quot;/bin/ksh&quot; ]; then
      ulimit -p 16384
      ulimit -n 65536
  else
      ulimit -u 16384 -n 65536
  fi
fi 
</code></pre>
<h3 id="配置用户环境">配置用户环境</h3>
<ol>
<li>创建软件安装路径</li>
</ol>
<pre><code class="language-bash"># 目录与配置文件相关，请按需修改
mkdir -p /data/oracle/product/11.2.0

mkdir /data/oracle/oradata

mkdir /data/oracle/inventory

mkdir /data/oracle/fast_recovery_area

chown -R oracle:oinstall /data/oracle

chmod -R 775 /data/oracle
</code></pre>
<ol start="2">
<li>配置用户环境变量</li>
</ol>
<blockquote>
<p>.bash_profile</p>
</blockquote>
<pre><code class="language-vim"># 末尾添加
ORACLE_BASE=/data/oracle
ORACLE_HOME=$ORACLE_BASE/product/11.2.0
ORACLE_SID=orcl # 实例名与配置文件相关，请按需修改
PATH=$PATH:$ORACLE_HOME/bin
export ORACLE_BASE ORACLE_HOME ORACLE_SID PATH
</code></pre>
<pre><code class="language-bash">source .bash_profile
</code></pre>
<h2 id="配置信息">配置信息</h2>
<h3 id="数据库响应文件">数据库响应文件</h3>
<blockquote>
<p>db_install.rsp</p>
</blockquote>
<pre><code class="language-bash"># 静默安装，无需图形界面
oracle.install.option=INSTALL_DB_SWONLY
#主机名修改
ORACLE_HOSTNAME=centos36181
UNIX_GROUP_NAME=oinstall
INVENTORY_LOCATION=/data/oracle/inventory
SELECTED_LANGUAGES=en,zh_CN
ORACLE_HOME=/data/oracle/product/11.2.0
ORACLE_BASE=/data/oracle
oracle.install.db.InstallEdition=EE
oracle.install.db.DBA_GROUP=dba
oracle.install.db.OPER_GROUP=dba
# 客户端字符串
oracle.install.db.config.starterdb.characterSet=ZHS16GBK
DECLINE_SECURITY_UPDATES=true
</code></pre>
<h3 id="库实例响应文件">库实例响应文件</h3>
<pre><code class="language-vim"># 选择创建数据库模式
[CREATEDATABASE]

# 全局数据库的名字=SID+主机域名
GDBNAME = &quot;orcl.test&quot;
# 对应的实例名字
SID = &quot;orcl&quot;
# 建库用的模板文件
TEMPLATENAME = &quot;General_Purpose.dbc&quot;
# SYS管理员密码
SYSPASSWORD = &quot;123456&quot;
# SYSTEM管理员密码
SYSTEMPASSWORD = &quot;123456&quot;

# 数据文件存放目录
DATAFILEDESTINATION =/data/oracle/oradata
# 恢复数据存放目录
RECOVERYAREADESTINATION=/data/oracle/fast_recovery_area
# 字符集，重要!!! 建库后一般不能更改，所以建库前要确定清楚。
# (CHARACTERSET = &quot;AL32UTF8&quot; NATIONALCHARACTERSET= &quot;UTF8&quot;)
CHARACTERSET = &quot;ZHS16GBK&quot;
# oracle使用物理内存80%（可选）
TOTALMEMORY = &quot;1638&quot; 
</code></pre>
<h2 id="软件安装与卸载">软件安装与卸载</h2>
<h3 id="安装数据库">安装数据库</h3>
<pre><code class="language-bash">database/runInstaller -silent -responseFile /database/response/db_install.rsp -ignorePrereq
</code></pre>
<h3 id="配置监听">配置监听</h3>
<pre><code class="language-bash"># 使用oracle用户
netca /silent /responseFile /database/response/netca.rsp
</code></pre>
<h3 id="安装库实例">安装库实例</h3>
<pre><code class="language-bash"># 使用oracle用户
dbca -silent -responseFile /database/response/dbca.rsp
</code></pre>
<h3 id="卸载数据库">卸载数据库</h3>
<pre><code class="language-bash">dbca -silent -delete Database -responseFile /database/response/dbca.rsp
</code></pre>

                          </div>
                        </div>
                        <div class="layout-post-social">
                          <div class="item reader">
                            <div id="/post/oracle-an-zhuang/" class="leancloud-visitors view"
                              data-flag-title="Oracle 安装">
                              <span class="post-meta-item-text">阅读 </span>
                              <span class="leancloud-visitors-count"></span>
                            </div>
                          </div>
                        </div>

                        <div class="layout-post-navigation">
                          <div class="navigation-list">
                            
                            <div class="post-card row">
                              
                              <div class="card-content col-12">
                                <div class="card-body">
                                  <div class="header">
                                    <a href="https://mzqk.github.io/post/ru-he-yue-du-yi-ben-shu/" class="title">
                                      <h4>如何阅读一本书</h4>
                                    </a>
                                  </div>
                                  <div class="inner">
                                    <div class="abstract">
                                      
                                    </div>
                                  </div>
                                </div>
                                <div class="card-footer">
                                  <div class="item"><span>下一篇</span></div>
                                  <div class="item">2018-12-20</div>
                                </div>
                              </div>
                              
                            </div>
                            
                          </div>
                        </div>

                        <div class="layout-comments"></div>
                        
                      </div>
                    </div>

                    <div class="col-12 col-lg-2 d-none d-lg-block">
                      <div class="layout-post-sidebar">
                        <div class="layout-sidebar-item">
                          <ul class="markdownIt-TOC">
<li><a href="#linux-%E5%AE%89%E8%A3%85-oracle%E8%BD%AF%E4%BB%B6">Linux 安装 Oracle软件</a>
<ul>
<li><a href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">环境准备</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84">创建用户和用户组</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96">安装依赖</a></li>
<li><a href="#%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E6%95%B4">内核参数调整</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E7%8E%AF%E5%A2%83">配置用户环境</a></li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">配置信息</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%93%8D%E5%BA%94%E6%96%87%E4%BB%B6">数据库响应文件</a></li>
<li><a href="#%E5%BA%93%E5%AE%9E%E4%BE%8B%E5%93%8D%E5%BA%94%E6%96%87%E4%BB%B6">库实例响应文件</a></li>
</ul>
</li>
<li><a href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD">软件安装与卸载</a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85%E6%95%B0%E6%8D%AE%E5%BA%93">安装数据库</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%9B%91%E5%90%AC">配置监听</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E5%BA%93%E5%AE%9E%E4%BE%8B">安装库实例</a></li>
<li><a href="#%E5%8D%B8%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93">卸载数据库</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layout-totop d-none"><i class="fa fa-angle-up" aria-hidden="true"></i></div>

    	<div class="layout-footer">

		<div class="container">
			<div class="row justify-content-lg-center">
				<div class="col-12 col-lg-9">
					<div class="footer">
						<div class="row">
							<div class="col-12 col-md-9">
								<div class="footer-copy">
									
									Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
									<div class="footer-icp d-none d-sm-inline-block">
										<span class="px-2">⋅</span>
										
									</div>
								</div>
							</div>
							<div class="col-sm-3 d-none d-md-block">
								<div class="footer-links">
									
									
									
									
									<span class="footer-links-item">
										<a href="https://github.com/MZqk" target="_blank">
											<i class="fa fa-github" aria-hidden="true"></i>
										</a>
									</span>
									
									
									
									
									
									
									
									
									
									<span class="footer-links-item">
										<a href="961504168" target="_blank">
											<i class="fa fa-qq" aria-hidden="true"></i>
										</a>
									</span>
									
									
									
									
									
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script type="text/javascript" src='https://mzqk.github.io/media/scripts/main.js'></script>
	

  </div>
</body>

</html>